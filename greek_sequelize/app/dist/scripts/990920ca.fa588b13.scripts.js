"use strict";angular.module("theme.services",[]).service("$global",["$rootScope","EnquireService","$document",function($rootScope,EnquireService,$document){this.settings={fixedHeader:!0,headerBarHidden:!0,leftbarCollapsed:!1,leftbarShown:!1,rightbarCollapsed:!1,fullscreen:!1,layoutHorizontal:!1,layoutHorizontalLargeIcons:!1,layoutBoxed:!1,showSearchCollapsed:!1};var brandColors={"default":"#ecf0f1",inverse:"#95a5a6",primary:"#3498db",success:"#2ecc71",warning:"#f1c40f",danger:"#e74c3c",info:"#1abcaf",brown:"#c0392b",indigo:"#9b59b6",orange:"#e67e22",midnightblue:"#34495e",sky:"#82c4e6",magenta:"#e73c68",purple:"#e044ab",green:"#16a085",grape:"#7a869c",toyo:"#556b8d",alizarin:"#e74c3c"};this.getBrandColor=function(name){return brandColors[name]?brandColors[name]:brandColors["default"]},$document.ready(function(){EnquireService.register("screen and (max-width: 767px)",{match:function(){$rootScope.$broadcast("globalStyles:maxWidth767",!0)},unmatch:function(){$rootScope.$broadcast("globalStyles:maxWidth767",!1)}})}),this.get=function(key){return this.settings[key]},this.set=function(key,value){this.settings[key]=value,$rootScope.$broadcast("globalStyles:changed",{key:key,value:this.settings[key]}),$rootScope.$broadcast("globalStyles:changed:"+key,this.settings[key])},this.values=function(){return this.settings}}]).factory("pinesNotifications",function(){return{notify:function(args){var notification=$.pnotify(args);return notification.notify=notification.pnotify,notification},defaults:$.pnotify.defaults}}).factory("progressLoader",function(){return{start:function(){$(document).skylo("start")},set:function(position){$(document).skylo("set",position)},end:function(){$(document).skylo("end")},get:function(){return $(document).skylo("get")},inch:function(amount){$(document).skylo("show",function(){$(document).skylo("inch",amount)})}}}).factory("EnquireService",["$window",function($window){return $window.enquire}]).factory("$bootbox",["$modal",function($modal){return void 0==$.fn.modal&&($.fn.modal=function(directive){var that=this;if("hide"==directive)return void(this.data("bs.modal")&&(this.data("bs.modal").close(),$(that).remove()));if("show"!=directive){var modalInstance=$modal.open({template:$(this).find(".modal-content").html()});this.data("bs.modal",modalInstance),setTimeout(function(){$(".modal.ng-isolate-scope").remove(),$(that).css({opacity:1,display:"block"}).addClass("in")},100)}}),bootbox}]).filter("safe_html",["$sce",function($sce){return function(val){return $sce.trustAsHtml(val)}}]),angular.module("theme.directives",[]).directive("disableAnimation",["$animate",function($animate){return{restrict:"A",link:function($scope,$element,$attrs){$attrs.$observe("disableAnimation",function(value){$animate.enabled(!value,$element)})}}}]).directive("slideOut",function(){return{restrict:"A",scope:{show:"=slideOut"},link:function(scope,element){element.hide(),scope.$watch("show",function(newVal,oldVal){newVal!==oldVal&&element.slideToggle({complete:function(){scope.$apply()}})})}}}).directive("slideOutNav",["$timeout",function($t){return{restrict:"A",scope:{show:"=slideOutNav"},link:function(scope,element){scope.$watch("show",function(newVal){return $("body").hasClass("collapse-leftbar")?void(1==newVal?element.css("display","block"):element.css("display","none")):void(1==newVal?element.slideDown({complete:function(){$t(function(){scope.$apply()})}}):0==newVal&&element.slideUp({complete:function(){$t(function(){scope.$apply()})}}))})}}}]).directive("panel",function(){return{restrict:"E",transclude:!0,scope:{panelClass:"@",heading:"@",panelIcon:"@"},templateUrl:"../views/templates/panel.html"}}).directive("pulsate",function(){return{scope:{pulsate:"="},link:function(scope,element){$(element).pulsate(scope.pulsate)}}}).directive("prettyprint",function(){return{restrict:"C",link:function(scope,element){element.html(prettyPrintOne(element.html(),"",!0))}}}).directive("passwordVerify",function(){return{require:"ngModel",scope:{passwordVerify:"="},link:function(scope,element,attrs,ctrl){scope.$watch(function(){var combined;return(scope.passwordVerify||ctrl.$viewValue)&&(combined=scope.passwordVerify+"_"+ctrl.$viewValue),combined},function(value){value&&ctrl.$parsers.unshift(function(viewValue){var origin=scope.passwordVerify;return origin!==viewValue?void ctrl.$setValidity("passwordVerify",!1):(ctrl.$setValidity("passwordVerify",!0),viewValue)})})}}}).directive("backgroundSwitcher",function(){return{restrict:"EA",link:function(scope,element){$(element).click(function(){$("body").css("background",$(element).css("background"))})}}}).directive("panelControls",[function(){return{restrict:"E",require:"?^tabset",link:function(scope,element){var panel=$(element).closest(".panel");0==panel.hasClass(".ng-isolate-scope")&&$(element).appendTo(panel.find(".options"))}}}]).directive("panelControlCollapse",function(){return{restrict:"EAC",link:function(scope,element){return element.bind("click",function(){$(element).toggleClass("fa-chevron-down fa-chevron-up"),$(element).closest(".panel").find(".panel-body").slideToggle({duration:200}),$(element).closest(".panel-heading").toggleClass("rounded-bottom")}),!1}}}).directive("icheck",function($timeout){return{require:"?ngModel",link:function($scope,element,$attrs,ngModel){return $timeout(function(){var parentLabel=element.parent("label");parentLabel.length&&parentLabel.addClass("icheck-label");var value;return value=$attrs.value,$scope.$watch($attrs.ngModel,function(){$(element).iCheck("update")}),$(element).iCheck({checkboxClass:"icheckbox_minimal-blue",radioClass:"iradio_minimal-blue"}).on("ifChanged",function(event){return"checkbox"===$(element).attr("type")&&$attrs.ngModel&&$scope.$apply(function(){return ngModel.$setViewValue(event.target.checked)}),"radio"===$(element).attr("type")&&$attrs.ngModel?$scope.$apply(function(){return ngModel.$setViewValue(value)}):void 0})})}}}).directive("knob",function(){return{restrict:"EA",template:'<input class="dial" type="text"/>',scope:{options:"="},replace:!0,link:function(scope,element){$(element).knob(scope.options)}}}).directive("uiBsSlider",["$timeout",function($timeout){return{link:function(scope,element){$timeout(function(){element.slider()})}}}]).directive("tileLarge",function(){return{restrict:"E",scope:{item:"=data"},templateUrl:"../views/templates/tile-large.html",transclude:!0}}).directive("tileMini",function(){return{restrict:"E",scope:{item:"=data"},templateUrl:"../views/templates/tile-mini.html"}}).directive("tile",function(){return{restrict:"E",scope:{heading:"@",type:"@"},transclude:!0,templateUrl:"../views/templates/tile-generic.html",link:function(scope,element){var heading=element.find("tile-heading");heading.length&&heading.appendTo(element.find(".tiles-heading"))},replace:!0}}).directive("jscrollpane",["$timeout",function($timeout){return{restrict:"A",scope:{options:"=jscrollpane"},link:function(scope,element){$timeout(function(){element.jScrollPane(-1!=navigator.appVersion.indexOf("Win")?$.extend({mouseWheelSpeed:20},scope.options):scope.options),element.on("click",".jspVerticalBar",function(event){event.preventDefault(),event.stopPropagation()}),element.bind("mousewheel",function(e){e.preventDefault()})})}}}]).directive("stickyScroll",function(){return{restrict:"A",link:function(scope,element,attr){function stickyTop(){var topMax=parseInt(attr.stickyScroll);if(0==$("body").hasClass("static-header"))return element.css("top",topMax+"px");{var window_top=$(window).scrollTop();element.offset().top}topMax>window_top?element.css("top",topMax-window_top+"px"):element.css("top","0px")}$(function(){$(window).scroll(stickyTop),stickyTop()})}}}).directive("rightbarRightPosition",function(){return{restrict:"A",scope:{isFixedLayout:"=rightbarRightPosition"},link:function(scope){scope.$watch("isFixedLayout",function(newVal,oldVal){newVal!=oldVal&&setTimeout(function(){var $pc=$("#page-content"),ending_right=$(window).width()-($pc.offset().left+$pc.outerWidth());0>ending_right&&(ending_right=0),$("#page-rightbar").css("right",ending_right)},100)})}}}).directive("fitHeight",["$window","$timeout","$location",function($window,$timeout){return{restrict:"A",scope:!0,link:function(scope,element){scope.docHeight=$(document).height();var setHeight=function(newVal){var diff=$("header").height();$("body").hasClass("layout-horizontal")&&(diff+=112),newVal-diff>element.outerHeight()?element.css("min-height",newVal-diff+"px"):element.css("min-height",$(window).height()-diff)};scope.$watch("docHeight",function(newVal){setHeight(newVal)}),$(window).on("resize",function(){setHeight($(document).height())});var resetHeight=function(){scope.docHeight=$(document).height(),$timeout(resetHeight,1e3)};$timeout(resetHeight,1e3)}}}]).directive("jscrollpaneOn",["$timeout",function($timeout){return{restrict:"A",scope:{applyon:"=jscrollpaneOn"},link:function(scope,element){scope.$watch("applyon",function(newVal){if(0==newVal){var api=element.data("jsp");return void(api&&api.destroy())}$timeout(function(){element.jScrollPane({autoReinitialise:!0})})})}}}]).directive("backToTop",function(){return{restrict:"AE",link:function(scope,element){element.click(function(){$("body").scrollTop(0)})}}}),angular.module("theme.ui-paginations",[]).controller("PaginationAndPagingController",["$scope",function($scope){$scope.totalItems=64,$scope.currentPage=4,$scope.pageChanged=function(){console.log("Page changed to: "+$scope.currentPage)},$scope.maxSize=5,$scope.bigTotalItems=175,$scope.bigCurrentPage=1,$scope.dpWithCallback={onSelectedDateChanged:function(event,date){alert("Selected date: "+moment(date).format("Do, MMM YYYY"))}}}]).directive("datepaginator",function(){return{restrict:"A",scope:{options:"=datepaginator"},link:function(scope,element){setTimeout(function(){element.datepaginator(scope.options)},10)}}}),angular.module("theme.vector_maps",[]).controller("VectorMapsController",["$scope",function($scope){$scope.jqvmapWorld={map:"world_en",backgroundColor:"transparent",color:"#f5f5f5",hoverOpacity:.7,selectedColor:"#1880c4",enableZoom:!0,showTooltip:!0,values:sample_data,scaleColors:["#90c2e3","#4697ce"],normalizeFunction:"polynomial"},$scope.jqvmapUSA={map:"usa_en",backgroundColor:"transparent",color:"#509BBD",hoverOpacity:.7,selectedColor:"#1278a6",enableZoom:!0,showTooltip:!0,values:sample_data,scaleColors:["#C8EEFF","#006491"],normalizeFunction:"polynomial"},$scope.jqvmapEurope={map:"europe_en",backgroundColor:"transparent",color:"#dddddd",hoverOpacity:.7,selectedColor:"#1dda1d",enableZoom:!0,showTooltip:!0,values:sample_data,scaleColors:["#b6ddb7","#51d951"],normalizeFunction:"polynomial"}}]).directive("jqvmap",["$timeout",function($timeout){return{restrict:"A",scope:{options:"="},link:function(scope,element){$timeout(function(){element.vectorMap(scope.options),scope.$on("$destroy",function(){element.data().mapObject.applyTransform=function(){}})})}}}]),angular.module("theme.google_maps",[]).controller("GMapsController",["$scope",function($scope){$scope.basicMapOptions={lat:-12.043333,lng:-77.028333},$scope.routeMapInstance,$scope.routeMapOptions={lat:-12.043333,lng:-77.028333},$scope.startRoute=function($event){$event.preventDefault(),$scope.routeMapInstance.travelRoute({origin:[-12.044012922866312,-77.02470665341184],destination:[-12.090814532191756,-77.02271108990476],travelMode:"driving",step:function(e){$("#instructions").append("<li>"+e.instructions+"</li>"),$("#instructions li:eq("+e.step_number+")").delay(450*e.step_number).fadeIn(200,function(){$scope.routeMapInstance.setCenter(e.end_location.lat(),e.end_location.lng()),$scope.routeMapInstance.drawPolyline({path:e.path,strokeColor:"#131540",strokeOpacity:.6,strokeWeight:6})})}})},$scope.panoramicMapOptions={lat:-12.043333,lng:-77.028333};var infoWindow=new google.maps.InfoWindow({});$scope.fusionMapInstance,$scope.fusionMapOptions={zoom:11,lat:41.850033,lng:-87.6500523};var path=[[-12.044012922866312,-77.02470665341184],[-12.05449279282314,-77.03024273281858],[-12.055122327623378,-77.03039293652341],[-12.075917129727586,-77.02764635449216],[-12.07635776902266,-77.02792530422971],[-12.076819390363665,-77.02893381481931],[-12.088527520066453,-77.0241058385925],[-12.090814532191756,-77.02271108990476]];$scope.polylinesMapInstance,$scope.polylinesMapOptions={lat:-12.043333,lng:-77.028333,click:function(e){console.log(e)}},$scope.geoCodingMapInstance,$scope.geocodeAddress="Rio",$scope.submitGeocoding=function(address){GMaps.geocode({address:address,callback:function(results,status){if("OK"==status){var latlng=results[0].geometry.location;$scope.geoCodingMapInstance.setCenter(latlng.lat(),latlng.lng()),$scope.geoCodingMapInstance.addMarker({lat:latlng.lat(),lng:latlng.lng()})}}})},$scope.$on("GMaps:created",function(event,mapInstance){mapInstance.key&&($scope[mapInstance.key]=mapInstance.map),"fusionMapInstance"==mapInstance.key?$scope.fusionMapInstance.loadFromFusionTables({query:{select:"'Geocodable address'",from:"1mZ53Z70NsChnBMm-qEYmSDOvLXgrreLTkQUvvg"},suppressInfoWindows:!0,events:{click:function(point){infoWindow.setContent("You clicked here!"),infoWindow.setPosition(point.latLng),infoWindow.open(fusion.map)}}}):"polylinesMapInstance"==mapInstance.key?$scope.polylinesMapInstance.drawPolyline({path:path,strokeColor:"#131540",strokeOpacity:.6,strokeWeight:6}):"geoCodingMapInstance"==mapInstance.key})}]).service("GMaps",["$rootScope",function($rootScope){this.new=function(options,instance){var gmaps=new GMaps(options);$rootScope.$broadcast("GMaps:created",{key:instance,map:gmaps})},this.newPanorama=function(options,instance){var gmaps=GMaps.createPanorama(options);$rootScope.$broadcast("GMaps:created",{key:instance,map:gmaps})}}]).directive("gmap",["$timeout","GMaps",function($timeout,GMaps){return{restrict:"A",scope:{options:"=",instance:"@"},link:function(scope,element,attr){attr.id||(attr.id=Math.random().toString(36).substring(7),element.attr("id",attr.id)),scope.options.el="#"+attr.id,void 0!==attr.panorama?GMaps.newPanorama(scope.options,scope.instance):GMaps.new(scope.options,scope.instance)}}}]),angular.module("theme.calendars",[]).controller("CalendarController",["$scope","$global",function($scope,$global){var date=new Date,d=date.getDate(),m=date.getMonth(),y=date.getFullYear();$scope.demoEvents=[{title:"All Day Event",start:new Date(y,m,8),backgroundColor:$global.getBrandColor("warning")},{title:"Long Event",start:new Date(y,m,d-5),end:new Date(y,m,d-2),backgroundColor:$global.getBrandColor("success")},{id:999,title:"Repeating Event",start:new Date(y,m,d-3,16,0),allDay:!1,backgroundColor:$global.getBrandColor("primary")},{id:999,title:"Repeating Event",start:new Date(y,m,d+4,16,0),allDay:!1,backgroundColor:$global.getBrandColor("danger")},{title:"Meeting",start:new Date(y,m,d,10,30),allDay:!1,backgroundColor:$global.getBrandColor("info")},{title:"Lunch",start:new Date(y,m,d,12,0),end:new Date(y,m,d,14,0),allDay:!1,backgroundColor:$global.getBrandColor("midnightblue")},{title:"Birthday Party",start:new Date(y,m,d+1,19,0),end:new Date(y,m,d+1,22,30),allDay:!1,backgroundColor:$global.getBrandColor("primary")},{title:"Click for Google",start:new Date(y,m,28),end:new Date(y,m,29),url:"http://google.com/",backgroundColor:$global.getBrandColor("warning")}],$scope.events=[{title:"Demo Event 1"},{title:"Demo Event 2"},{title:"Demo Event 2"}],$scope.addEvent=function(){$scope.events.push({title:$scope.newEvent}),$scope.newEvent=""}}]).directive("fullCalendar",function(){return{restrict:"A",scope:{options:"=fullCalendar"},link:function(scope,element){var defaultOptions={header:{left:"prev,next today",center:"title",right:"month,agendaWeek,agendaDay"},selectable:!0,selectHelper:!0,select:function(start,end,allDay){var title=prompt("Event Title:");title&&calendar.fullCalendar("renderEvent",{title:title,start:start,end:end,allDay:allDay},!0),calendar.fullCalendar("unselect")},editable:!0,events:[],buttonText:{prev:'<i class="fa fa-angle-left"></i>',next:'<i class="fa fa-angle-right"></i>',prevYear:'<i class="fa fa-angle-double-left"></i>',nextYear:'<i class="fa fa-angle-double-right"></i>',today:"Today",month:"Month",week:"Week",day:"Day"}};$.extend(!0,defaultOptions,scope.options),1==defaultOptions.droppable&&(defaultOptions.drop=function(date,allDay){var originalEventObject=$(this).data("eventObject"),copiedEventObject=$.extend({},originalEventObject);copiedEventObject.start=date,copiedEventObject.allDay=allDay,calendar.fullCalendar("renderEvent",copiedEventObject,!0),1==defaultOptions.removeDroppedEvent&&$(this).remove()});var calendar=$(element).fullCalendar(defaultOptions)}}}).directive("draggableEvent",function(){return{restrict:"A",scope:{eventDef:"=draggableEvent"},link:function(scope,element){$(element).draggable({zIndex:999,revert:!0,revertDuration:0}),$(element).data("eventObject",scope.eventDef)}}}),angular.module("theme.gallery",[]).controller("GalleryController",["$scope","gallery","$modal","$timeout",function($scope,galleryService,$modal,$t){$scope.galleryInstance=galleryService.get(),$scope.galleryFilter="all",$scope.showGrid=function(){$scope.galleryInstance.setGrid()},$scope.showList=function(){$scope.galleryInstance.setList()},$scope.recompile=function(scope){$t(function(){$scope.galleryInstance.recompile(scope)},600)},$scope.openImageModal=function($event){$event.preventDefault(),$event.stopPropagation();$modal.open({templateUrl:"imageModalContent.html",controller:["$scope","$modalInstance","src",function($scope,$modalInstance,src){$scope.src=src,$scope.cancel=function(){$modalInstance.dismiss("cancel")}}],size:"lg",resolve:{src:function(){return console.log($event.target.src.replace("thumb_","")),$event.target.src.replace("thmb_","")}}})},$scope.$watch("galleryFilter",function(newVal){$scope.galleryInstance.filter(newVal)})}]).service("gallery",["$compile",function($compile){this.element=null,this.get=function(){return this},this.setElement=function(element){this.element=element},this.setGrid=function(){$(this.element).mixitup("toGrid"),$(this.element).removeClass("full-width")},this.setList=function(){$(this.element).mixitup("toList"),$(this.element).addClass("full-width")},this.filter=function(cat){$(this.element).mixitup("filter",cat)},this.recompile=function(scope){var html=$(this.element).html();$(this.element).html("");var compiled=angular.element($compile(html)(scope));$(this.element).append(compiled)},this.done=function(){console.log("done")}}]).directive("gallery",function(){return{restrict:"A",scope:{galleryInstance:"=gallery"},link:function(scope,element){$(element).mixitup(),scope.galleryInstance.setElement(element)}}}),angular.module("theme.tasks",[]).controller("TasksController",["$scope",function($scope){$scope.newTaskTitle="",$scope.newTaskLabelText="",$scope.showTasksTab=!0,$scope.showCompletedTab=!1,$scope.tasks=[{title:"Write documentation",label:"Due tomorrow",color:"success"},{title:"Compile Code",label:"Today",color:"danger"},{title:"Upload Files to Server",label:"6 days",color:"primary"},{title:"Call client",label:"Tomorrow",color:"warning"},{title:"Buy Milk",label:"Today",color:"danger"},{title:"Set up meeting with client",label:"Any day",color:"inverse"},{title:"Pay office rent and bills",label:"5 days from now",color:"success"}],$scope.tasksComplete=[],$scope.selectedItem={},$scope.options={},$scope.remove=function(scope){scope.remove()},$scope.complete=function(scope,item){$scope.tasksComplete.push(item),scope.remove()},$scope.incomplete=function(item,index){$scope.tasks.push(item),$scope.tasksComplete.splice(index,1)},$scope.newItem=function(title,label,color){""!=this.newTaskTitle&&($scope.tasks.push({title:title,label:label,color:color}),this.newTaskTitle="",this.newTaskLabelText="",this.showForm=!1)},$scope.edit=function(item){item.editing=!0,item.titlePrev=item.title,item.labelPrev=item.label,item.colorPrev=item.color},$scope.cancelEdit=function($event,item){27==$event.keyCode&&(item.title=item.titlePrev,item.label=item.labelPrev,item.color=item.colorPrev,item.editing=!1)},$scope.cancelAdd=function($event){27==$event.keyCode&&(this.newTaskTitle="",this.newTaskLabelText="",this.showForm=!1)},$scope.doneEditing=function(item){item.editing=!1}}]),angular.module("theme.ui-ratings",[]).controller("RatingsDemoController",["$scope",function($scope){$scope.rate=7,$scope.max=10,$scope.isReadonly=!1,$scope.hoveringOver=function(value){this.overStar=value,this.percent=100*(value/$scope.max)},$scope.ratingStates=[{stateOn:"fa-check-circle",stateOff:"fa-check-circle-o"},{stateOn:"fa-star",stateOff:"fa-star-o"},{stateOn:"fa-heart",stateOff:"fa-heart-o"},{stateOn:"fa-heart"},{stateOff:"fa-heart-o"}]}]),angular.module("theme.ui-modals",[]).controller("ModalsDemoController",["$scope","$modal","$bootbox","$log",function($scope,$modal,$bootbox,$log){$scope.items=["item1","item2","item3"],$scope.open=function(size){var modalInstance=$modal.open({templateUrl:"myModalContent.html",controller:function($scope,$modalInstance,items){$scope.items=items,$scope.selected={item:$scope.items[0]},$scope.ok=function(){$modalInstance.close($scope.selected.item)},$scope.cancel=function(){$modalInstance.dismiss("cancel")}},size:size,resolve:{items:function(){return $scope.items}}});modalInstance.result.then(function(selectedItem){$scope.selected=selectedItem},function(){$log.info("Modal dismissed at: "+new Date)})},$scope.openDemoModal=function(size){$modal.open({templateUrl:"demoModalContent.html",controller:function($scope,$modalInstance){$scope.cancel=function(){$modalInstance.dismiss("cancel")}},size:size})},$scope.openAlert=function(){$bootbox.alert("Hello world!")},$scope.openAlertWithCallback=function(){$bootbox.alert("Hello world!",function(){alert("You clicked OK!")})},$scope.openConfirm=function(){$bootbox.confirm("Are you sure?",function(result){alert("Confirm result: "+result)})},$scope.openPrompt=function(){$bootbox.prompt("What is your name?",function(result){alert(null===result?"Prompt dismissed":"Hi "+result+"!")})},$scope.openDialog=function(){$bootbox.dialog({message:"I am a custom dialog",title:"Custom title",buttons:{success:{label:"Success!",className:"btn-success",callback:function(){alert("great success")}},danger:{label:"Danger!",className:"btn-danger",callback:function(){alert("uh oh, look out!")}},main:{label:"Click ME!",className:"btn-primary",callback:function(){alert("Primary button")}}}})}}]),angular.module("theme.ui-tiles",[]).controller("TilesController",["$scope","$global",function($scope,$global){$scope.$global=$global,$scope.largeTiles=[{title:"Page Views",titleBarInfo:"-7.6%",text:"1.6K",color:"info",classes:"fa fa-eye"},{title:"Likes",titleBarInfo:"+15.4%",text:"345",color:"orange",classes:"fa fa-thumbs-o-up"},{title:"Bugs Fixed",titleBarInfo:"+10.4%",text:"21",color:"danger",classes:"fa fa-check-square"},{title:"New Members",titleBarInfo:"+25.4%",text:"124",color:"midnightblue",classes:"fa fa-group"},{title:"Gifts",titleBarInfo:"+15.4%",text:"16",color:"purple",classes:"fa fa-gift"},{title:"Profits",titleBarInfo:"+17.4%",text:"$2.5k",color:"success",classes:"fa fa-money"},{title:"Sales Revenue",titleBarInfo:"+24.4%",text:"$30.2k",color:"primary",classes:"fa fa-shopping-cart"},{title:"New Orders",titleBarInfo:"+15.4%",text:"679",color:"indigo",classes:"fa fa-comments"},{title:"Comments",titleBarInfo:"+22.4%",text:"32",color:"green",classes:"fa fa-comments"},{title:"Downloads",titleBarInfo:"+16.4%",text:"6.7K",color:"danger",classes:"fa fa-download"},{title:"Tasks",titleBarInfo:"+26.4%",text:"17",color:"magenta",classes:"fa fa-tasks"},{title:"Videos",titleBarInfo:"+6.4%",text:"31",color:"inverse",classes:"fa fa-video-camera"}],$scope.miniTiles=[{text:"Page Views",titleBarInfo:"7",color:"info",classes:"fa fa-eye"},{text:"Likes",titleBarInfo:"15",color:"orange",classes:"fa fa-thumbs-o-up"},{text:"Bugs Fixed",titleBarInfo:"+10",color:"danger",classes:"fa fa-check-square"},{text:"New Members",titleBarInfo:"+25",color:"midnightblue",classes:"fa fa-group"},{text:"Gifts",titleBarInfo:"15",color:"purple",classes:"fa fa-gift"},{text:"Profits",titleBarInfo:"17",color:"success",classes:"fa fa-money"},{text:"Sales Revenue",titleBarInfo:"24",color:"primary",classes:"fa fa-shopping-cart"},{text:"New Orders",titleBarInfo:"15",color:"indigo",classes:"fa fa-comments"},{text:"Comments",titleBarInfo:"22",color:"green",classes:"fa fa-comments"},{text:"Downloads",titleBarInfo:"16",color:"danger",classes:"fa fa-download"},{text:"Tasks",titleBarInfo:"26",color:"magenta",classes:"fa fa-tasks"},{text:"Videos",titleBarInfo:"4",color:"inverse",classes:"fa fa-video-camera"}]}]),angular.module("theme.ui-alerts",[]).controller("AlertsController",["$scope","pinesNotifications",function($scope,pinesNotifications){$scope.alerts=[{type:"success",msg:"<strong>Well done!</strong> You successfully read this important alert message."},{type:"warning",msg:"<strong>Warning!</strong> Best check yo self, you're not looking too good."},{type:"info",msg:"<strong>Heads up!</strong> This alert needs your attention, but it's not super important."},{type:"danger",msg:"<strong>Oh snap!</strong> Change a few things up and try submitting again."}],$scope.addAlert=function(){var types=["info","warning","danger","success"];$scope.alerts.push({msg:"Alerts can be added dynamically!",type:_.shuffle(types).shift()})},$scope.closeAlert=function(index){$scope.alerts.splice(index,1)},$scope.simpleInfo=function(){pinesNotifications.notify({title:"New Thing",text:"Just to let you know, something happened.",type:"info"})},$scope.simpleSuccess=function(){pinesNotifications.notify({title:"New Thing",text:"Just to let you know, something happened.",type:"success"})},$scope.simpleError=function(){pinesNotifications.notify({title:"New Thing",text:"Just to let you know, something happened.",type:"error"})},$scope.stickyInfo=function(){pinesNotifications.notify({title:"Sticky Info",text:"Sticky info, you know, like a newspaper covered in honey.",type:"info",hide:!1})},$scope.stickySuccess=function(){pinesNotifications.notify({title:"Sticky Success",text:"Sticky success... I'm not even gonna make a joke.",type:"success",hide:!1})},$scope.stickyError=function(){pinesNotifications.notify({title:"Uh Oh!",text:"Something really terrible happened. You really need to read this, so I won't close automatically.",type:"error",hide:!1})},$scope.bigNotice=function(){pinesNotifications.notify({title:"Big Notice",text:"Check me out! I'm tall and wide, even though my text isn't.",width:"500px",type:"error",min_height:"400px"})},$scope.showRich=function(){pinesNotifications.notify({title:'<span style="color: red;">Rich Content Notice</span>',type:"success",text:'<span style="color: blue;">Look at my beautiful <strong>strong</strong>, <em>emphasized</em>, and <span style="font-size: 1.5em;">large</span> text.</span>'})},$scope.showDynamic=function(){var percent=0,notice=pinesNotifications.notify({title:"Please Wait",type:"info",icon:"fa fa-spin fa-refresh",hide:!1,closer:!1,sticker:!1,opacity:.75,shadow:!1,width:"200px"});setTimeout(function(){notice.notify({title:!1});var interval=setInterval(function(){percent+=2;var options={text:percent+"% complete."};80==percent&&(options.title="Almost There"),percent>=100&&(window.clearInterval(interval),options.title="Done!",options.type="success",options.hide=!0,options.closer=!0,options.sticker=!0,options.icon="fa fa-check",options.opacity=1,options.shadow=!0,options.width=pinesNotifications.defaults.width),notice.notify(options)},120)},2e3)},$scope.showNoHistory=function(){pinesNotifications.notify({title:"No History Notice",text:"I'm not part of the notice history, so if you redisplay the last message, it won't be me.",history:!1,type:"error"})},$scope.showNoSticky=function(){pinesNotifications.notify({title:"No Sticky Button Notice",text:"Check me out! I'm a sticky notice with no unsticky button. You'll have to close me yourself.",hide:!1,sticker:!1,type:"error"})},$scope.showPermanent=function(){pinesNotifications.notify({title:"Permanent Buttons Notice",text:"My buttons are really lonely, so they're gonna hang out with us.",closer_hover:!1,sticker_hover:!1,type:"error"})},$scope.showNoMouseReset=function(){pinesNotifications.notify({title:"No Mouse Reset Notice",text:"I don't care if you move your mouse over me, I'll disappear when I want.",mouse_reset:!1,type:"error"})},$scope.showChanging=function(){pinesNotifications.notify({title:"Notice",type:"error",text:"Right now I'm a notice.",before_close:function(notification){return notification.notify({title:"Error",text:"Uh oh. Now I've become an error.",type:"error",before_close:function(notification){return notification.notify({title:"Success",text:"I fixed the error!",type:"success",before_close:function(notification){return notification.notify({title:"Info",text:"Everything's cool now.",type:"info",before_close:null}),notification.pnotify_queue_remove(),notification.effect("bounce"),!1}}),notification.pnotify_queue_remove(),notification.effect("bounce"),!1}}),notification.pnotify_queue_remove(),notification.effect("bounce"),!1}})}}]),angular.module("theme.ui-sliders",[]).controller("RangeAndSliderController",["$scope","progressLoader",function($scope,progressLoader){$scope.percent=43,$scope.percentages=[53,65,23,99],$scope.randomizePie=function(){$scope.percentages=_.shuffle($scope.percentages)},$scope.loaderStart=function(){progressLoader.start(),setTimeout(function(){progressLoader.set(50)},1e3),setTimeout(function(){progressLoader.end()},1500)},$scope.loaderEnd=function(){progressLoader.end()},$scope.loaderSet=function(position){progressLoader.set(position)},$scope.loaderGet=function(){alert(progressLoader.get()+"%")},$scope.loaderInch=function(){progressLoader.inch(10)}}]),angular.module("theme.ui-progressbars",[]).controller("ProgressbarController",["$scope",function($scope){$scope.rootPanels=[{active:!1},{active:!0}],$scope.max=200,$scope.random=function(){var type,value=Math.floor(100*Math.random()+1);type=25>value?"success":50>value?"info":75>value?"warning":"danger",$scope.showWarning="danger"===type||"warning"===type,$scope.dynamic=value,$scope.type=type},$scope.random(),$scope.randomStacked=function(){$scope.stacked=[];for(var types=["success","info","warning","danger"],i=0,n=Math.floor(4*Math.random()+1);n>i;i++){var index=Math.floor(4*Math.random());$scope.stacked.push({value:Math.floor(30*Math.random()+1),type:types[index]})}},$scope.randomStacked()}]),angular.module("theme.ui-carousel",[]).controller("CarouselDemoController",["$scope",function($scope){$scope.myInterval=5e3;var slides=$scope.slides=[],images=["yvonne.jpg","nature_woodstump.jpg","arch_fireescape.jpg","nature_river.jpg"];$scope.addSlide=function(){slides.push({image:"assets/demo/images/"+images[slides.length],text:images[slides.length]})};for(var i=0;4>i;i++)$scope.addSlide()}]),angular.module("theme.ui-tabs",[]).controller("TabsAndAccordionsDemoController",["$scope",function($scope){$scope.oneAtATime=!0,$scope.groups=[{title:"Dynamic Group Header - 1",content:"Dynamic Group Body - 1"},{title:"Dynamic Group Header - 2",content:"Dynamic Group Body - 2"}],$scope.items=["Item 1","Item 2","Item 3"],$scope.addItem=function(){var newItemNo=$scope.items.length+1;$scope.items.push("Item "+newItemNo)},$scope.status={isFirstOpen:!0,isFirstDisabled:!1}}]),angular.module("theme.ui-nestable",[]).controller("NestedTreeDemoController",["$scope",function($scope){$scope.list=[{id:1,title:"Write documentation",items:[]},{id:2,title:"Compile Code",items:[{id:21,title:"Upload Files to Server",items:[{id:211,title:"Call client",items:[]},{id:212,title:"Buy Milk",items:[]}]},{id:22,title:"Set up meeting with client",items:[]}]},{id:3,title:"Pay office rent and bills",items:[]},{id:4,title:"Read book",items:[]}],$scope.selectedItem={},$scope.options={},$scope.remove=function(scope){scope.remove()},$scope.toggle=function(scope){scope.toggle()},$scope.newSubItem=function(scope){var nodeData=scope.$modelValue;nodeData.items.push({id:10*nodeData.id+nodeData.items.length,title:nodeData.title+"."+(nodeData.items.length+1),items:[]})
}}]),angular.module("theme.ui-tables-basic",[]).controller("TablesBasicController",["$scope","$filter",function($scope){$scope.data={headings:["#","First Name","Last Name","Username"],rows:[["1","Mark","Otto","@mdo"],["2","Jacob","Thornton","@fat"],["3","Larry","the Bird","@twitter"]]}}]),angular.module("theme.ui-panels",[]).controller("PanelsController",["$scope","$timeout",function($scope,$timeout){$scope.rootPanels=[{active:!1},{active:!0}],$scope.alert=function(a){console.log(a)},$scope.demoPanelClass="panel-sky",$scope.demoPanelHeading="Simple Panel Heading",$scope.demoTabbedPanelClass="panel-danger",$scope.demoTabbedPanelHeading="Tabbed Panel Heading",$scope.demoPanelIcon="fa fa-fw fa-cog",$scope.demoDynamicIcons=function(){$scope.demoPanelIcon="fa fa-fw fa-spinner fa-spin",$timeout(function(){$scope.demoPanelIcon="fa fa-fw fa-tasks"},1500)}}]),angular.module("theme.form-uploads",["flow"]).config(["flowFactoryProvider",function(flowFactoryProvider){flowFactoryProvider.defaults={target:"",permanentErrors:[500,501],maxChunkRetries:1,chunkRetryInterval:5e3,simultaneousUploads:1},flowFactoryProvider.on("catchAll",function(){console.log("catchAll",arguments)})}]),angular.module("theme.form-image-crop",[]).controller("ImageCropController",["$scope",function($scope){$scope.cropped=!1;var imgBounds;$scope.setBounds=function(bounds){imgBounds=bounds},$scope.selected=function(coords){$scope.imageWidth=imgBounds[0],$scope.containerWidth=coords.w,$scope.containerHeight=coords.h,$scope.imageTop=-coords.y,$scope.imageLeft=-coords.x,$scope.cropped=!0}}]).directive("croppable",["$timeout",function($t){return{restrict:"A",replace:!0,scope:{src:"@",imgSelected:"&",cropInit:"&"},link:function(scope,element){var myImg;$t(function(){scope.src&&(myImg=element,element.width(element.width()),$(myImg).Jcrop({trackDocument:!0,onSelect:function(x){$t(function(){scope.imgSelected({coords:x})})}},function(){scope.bounds=this.getBounds()}))}),scope.$watch("bounds",function(){scope.cropInit({bounds:scope.bounds})})}}}]),angular.module("theme.tables-ng-grid",[]).controller("TablesAdvancedController",["$scope","$filter","$http",function($scope,$filter,$http){$scope.filterOptions={filterText:"",useExternalFilter:!0},$scope.totalServerItems=0,$scope.pagingOptions={pageSizes:[25,50,100],pageSize:25,currentPage:1},$scope.setPagingData=function(data,page,pageSize){var pagedData=data.slice((page-1)*pageSize,page*pageSize);$scope.myData=pagedData,$scope.totalServerItems=data.length,$scope.$$phase||$scope.$apply()},$scope.getPagedDataAsync=function(pageSize,page,searchText){setTimeout(function(){var data;if(searchText){var ft=searchText.toLowerCase();$http.get("assets/demo/ng-data.json").success(function(largeLoad){data=largeLoad.filter(function(item){return-1!=JSON.stringify(item).toLowerCase().indexOf(ft)}),$scope.setPagingData(data,page,pageSize)})}else $http.get("assets/demo/ng-data.json").success(function(largeLoad){$scope.setPagingData(largeLoad,page,pageSize)})},100)},$scope.getPagedDataAsync($scope.pagingOptions.pageSize,$scope.pagingOptions.currentPage),$scope.$watch("pagingOptions",function(newVal,oldVal){newVal!==oldVal&&newVal.currentPage!==oldVal.currentPage&&$scope.getPagedDataAsync($scope.pagingOptions.pageSize,$scope.pagingOptions.currentPage,$scope.filterOptions.filterText)},!0),$scope.$watch("filterOptions",function(newVal,oldVal){newVal!==oldVal&&$scope.getPagedDataAsync($scope.pagingOptions.pageSize,$scope.pagingOptions.currentPage,$scope.filterOptions.filterText)},!0),$scope.gridOptions={data:"myData",enablePaging:!0,showFooter:!0,totalServerItems:"totalServerItems",pagingOptions:$scope.pagingOptions,filterOptions:$scope.filterOptions}}]),angular.module("theme.tables-editable",[]).controller("TablesEditableController",["$scope","$filter",function($scope,$filter){$scope.myData=[{name:"Moroni",age:50},{name:"Tiancum",age:43},{name:"Jacob",age:27},{name:"Nephi",age:29},{name:"Enos",age:34}],$scope.gridOptions={data:"myData",enableCellSelection:!0,enableRowSelection:!1,enableCellEditOnFocus:!0,columnDefs:[{field:"name",displayName:"Name",enableCellEdit:!0},{field:"age",displayName:"Age",enableCellEdit:!0}]},$scope.users=[{id:1,name:"awesome user1",status:2,group:4,groupName:"admin"},{id:2,name:"awesome user2",status:void 0,group:3,groupName:"vip"},{id:3,name:"awesome user3",status:2,group:null}],$scope.statuses=[{value:1,text:"status1"},{value:2,text:"status2"},{value:3,text:"status3"},{value:4,text:"status4"}],$scope.groups=[{id:1,text:"MVP"},{id:2,text:"VIP"},{id:3,text:"ADMINS"},{id:4,text:"USER"}],$scope.showGroup=function(user){if(user.group&&$scope.groups.length){var selected=$filter("filter")($scope.groups,{id:user.group});return selected.length?selected[0].text:"Not set"}return user.groupName||"Not set"},$scope.showStatus=function(user){var selected=[];return user.status&&(selected=$filter("filter")($scope.statuses,{value:user.status})),selected.length?selected[0].text:"Not set"},$scope.saveUser=function(data,id){angular.extend(data,{id:id})},$scope.removeUser=function(index){$scope.users.splice(index,1)},$scope.addUser=function(){$scope.inserted={id:$scope.users.length+1,name:"",status:null,group:null},$scope.users.push($scope.inserted)}}]),angular.module("theme.charts-flot",[]).controller("FlotChartsController",["$scope","$timeout",function($scope,$timeout){function getRandomData(){for(dxta.length>0&&(dxta=dxta.slice(1));dxta.length<totalPoints;){var prev=dxta.length>0?dxta[dxta.length-1]:50,y=prev+10*Math.random()-5;0>y?y=0:y>100&&(y=100),dxta.push(y)}for(var res=[],i=0;i<dxta.length;++i)res.push([i,dxta[i]]);return res}for(var sin=[],cos=[],i=0;14>i;i+=.5)sin.push([i,Math.sin(i)/i]),cos.push([i,Math.cos(i)]);$scope.sinusoidalData=[{data:sin,label:"sin(x)/x"},{data:cos,label:"cos(x)"}],$scope.sinusoidalOptions={series:{shadowSize:0,lines:{show:!0},points:{show:!0}},grid:{hoverable:!0,clickable:!0},yaxis:{min:-1.2,max:1.2},colors:["#539F2E","#3C67A5"],tooltip:!0,tooltipOpts:{defaultTheme:!0}},$scope.sinusoidalOnClick=function(){},$scope.sinusoidalOnHover=function(){};for(var d1=[],i=0;14>i;i+=.5)d1.push([i,Math.sin(i)]);for(var d2=[[0,3],[4,8],[8,5],[9,13]],d3=[],i=0;14>i;i+=.5)d3.push([i,Math.cos(i)]);for(var d4=[],i=0;14>i;i+=.1)d4.push([i,Math.sqrt(10*i)]);for(var d5=[],i=0;14>i;i+=.5)d5.push([i,Math.sqrt(i)]);for(var d6=[],i=0;14>i;i+=.5+Math.random())d6.push([i,Math.sqrt(2*i+Math.sin(i)+5)]);$scope.multigraphData=[{data:d1,lines:{show:!0,fill:!0},shadowSize:0},{data:d2,bars:{show:!0},shadowSize:0},{data:d3,points:{show:!0},shadowSize:0},{data:d4,lines:{show:!0},shadowSize:0},{data:d5,lines:{show:!0},points:{show:!0},shadowSize:0},{data:d6,lines:{show:!0,steps:!0},shadowSize:0}],$scope.multigraphOptions={};var dxta=[],totalPoints=300,updateInterval=150;$scope.realtimeData=[getRandomData()],$scope.realtimeOptions={series:{shadowSize:0,lines:{fill:.1,lineWidth:1.5}},grid:{borderWidth:0},yaxis:{tickColor:"rgba(0,0,0,0.04)",ticks:2,min:0,max:100,font:{color:"rgba(0,0,0,0.4)",size:11}},xaxis:{tickColor:"transparent",show:!1},colors:["#7dcc93"]};var promise,updateRealtimeData=function(){$scope.realtimeData=[getRandomData()],$timeout.cancel(promise),promise=$timeout(updateRealtimeData,updateInterval)};updateRealtimeData(),d1=[];for(var i=0;10>=i;i+=1)d1.push([i,parseInt(30*Math.random())]);d2=[];for(var i=0;10>=i;i+=1)d2.push([i,parseInt(30*Math.random())]);d3=[];for(var i=0;10>=i;i+=1)d3.push([i,parseInt(30*Math.random())]);$scope.stackedIsTrue=!0,$scope.stackedBars=!0,$scope.stackedLines=!0,$scope.stackedSteps=!0;var getStackedOptions=function(){return{series:{stack:$scope.stackedIsTrue,lines:{show:$scope.stackedLines,fill:!0,steps:$scope.stackedSteps},bars:{show:$scope.stackedBars,barWidth:.6}}}};$scope.toggleOption=function(type){$scope["stacked"+type]=!$scope["stacked"+type],$scope.stackedOptions=getStackedOptions()},$scope.stackedOptions=getStackedOptions(),$scope.stackedData=[d1,d2,d3],$scope.pieData=[{label:"Series1",data:10},{label:"Series2",data:30},{label:"Series3",data:90},{label:"Series4",data:70},{label:"Series5",data:80},{label:"Series6",data:110}],$scope.$on("$destroy",function(){$timeout.cancel(promise)})}]).directive("flotChart",function(){return{restrict:"AE",scope:{data:"=flotData",options:"=flotOptions",plothover:"&plotHover",plotclick:"&plotClick"},link:function(scope,element){var plot=$.plot($(element),scope.data,scope.options);$(element).bind("plothover",function(event,position,item){scope.plothover({event:event,position:position,item:item})}),$(element).bind("plotclick",function(event,position,item){scope.plotclick({event:event,position:position,item:item})}),scope.$watch("data",function(newVal){plot.setData(newVal),plot.draw()}),scope.$watch("options",function(newVal){plot=$.plot($(element),scope.data,newVal)},!0)}}}),angular.module("theme.charts-svg",[]).directive("svgChart",function(){return{restrict:"EA",scope:{options:"=svgChart",type:"="},link:function(scope,element,attr){if(Morris){var elementId;elementId=$(element).attr("id")?$(element).attr("id"):$(element).attr("id",scope.type+attr.svgChart),Morris[scope.type](angular.extend(scope.options,{element:elementId}))}}}}).controller("SvgChartsController",["$scope",function($scope){$scope.lineChart={data:[{y:"2006",a:100,b:90},{y:"2007",a:75,b:65},{y:"2008",a:50,b:40},{y:"2009",a:75,b:65},{y:"2010",a:50,b:40},{y:"2011",a:75,b:65},{y:"2012",a:100,b:90}],xkey:"y",ykeys:["a","b"],labels:["Series A","Series B"]},$scope.barChart={data:[{y:"2006",a:100,b:90},{y:"2007",a:75,b:65},{y:"2008",a:50,b:40},{y:"2009",a:75,b:65},{y:"2010",a:50,b:40},{y:"2011",a:75,b:65},{y:"2012",a:100,b:90}],xkey:"y",ykeys:["a","b"],labels:["Series A","Series B"]},$scope.donutChart={data:[{label:"Download Sales",value:12},{label:"In-Store Sales",value:30},{label:"Mail-Order Sales",value:20}]},$scope.areaChart={data:[{y:"2006",a:100,b:90},{y:"2007",a:75,b:65},{y:"2008",a:50,b:40},{y:"2009",a:75,b:65},{y:"2010",a:50,b:40},{y:"2011",a:75,b:65},{y:"2012",a:100,b:90}],xkey:"y",ykeys:["a","b"],labels:["Series A","Series B"]}}]),angular.module("theme.charts-canvas",[]).controller("CanvasChartsController",["$scope",function($scope){$scope.lineChartData={labels:["January","February","March","April","May","June","July"],datasets:[{fillColor:"rgba(220,220,220,0.5)",strokeColor:"rgba(220,220,220,1)",pointColor:"rgba(220,220,220,1)",pointStrokeColor:"#fff",data:[65,59,90,81,56,55,40]},{fillColor:"rgba(151,187,205,0.5)",strokeColor:"rgba(151,187,205,1)",pointColor:"rgba(151,187,205,1)",pointStrokeColor:"#fff",data:[28,48,40,19,96,27,100]}]},$scope.barChartData={labels:["January","February","March","April","May","June","July"],datasets:[{fillColor:"rgba(220,220,220,0.5)",strokeColor:"rgba(220,220,220,1)",data:[65,59,90,81,56,55,40]},{fillColor:"rgba(151,187,205,0.5)",strokeColor:"rgba(151,187,205,1)",data:[28,48,40,19,96,27,100]}]},$scope.radarChartData={labels:["Eating","Drinking","Sleeping","Designing","Coding","Partying","Running"],datasets:[{fillColor:"rgba(220,220,220,0.5)",strokeColor:"rgba(220,220,220,1)",pointColor:"rgba(220,220,220,1)",pointStrokeColor:"#fff",data:[65,59,90,81,56,55,40]},{fillColor:"rgba(151,187,205,0.5)",strokeColor:"rgba(151,187,205,1)",pointColor:"rgba(151,187,205,1)",pointStrokeColor:"#fff",data:[28,48,40,19,96,27,100]}]},$scope.pieData=[{value:30,color:"#F38630"},{value:50,color:"#E0E4CC"},{value:100,color:"#69D2E7"}],$scope.polarAreaData=[{value:Math.random(),color:"#D97041"},{value:Math.random(),color:"#C7604C"},{value:Math.random(),color:"#21323D"},{value:Math.random(),color:"#9D9B7F"},{value:Math.random(),color:"#7D4F6D"},{value:Math.random(),color:"#584A5E"}],$scope.doughnutData=[{value:30,color:"#F7464A"},{value:50,color:"#46BFBD"},{value:100,color:"#FDB45C"},{value:40,color:"#949FB1"},{value:120,color:"#4D5360"}]}]).directive("canvasChart",function(){return{restrict:"EA",scope:{data:"=canvasChart",options:"=options",type:"="},link:function(scope,element){Chart&&new Chart($(element)[0].getContext("2d"))[scope.type](scope.data,scope.options)}}}),angular.module("theme.charts-inline",[]).directive("sparklines",["$timeout",function(){return{restrict:"A",scope:{options:"=sparklines",values:"=data"},link:function(scope,element,attr){var options={};if(scope.options)var options=angular.copy(scope.options);var container=$(element).closest("sparklines-composite"),target=element;container.length&&(container.find("span.sparklines-container").length<1&&container.append('<span class="sparklines-container"></span>'),target=container.find("span.sparklines-container"),target.find("canvas").length&&(options.composite=!0),attr.values?target.attr("values",attr.values):target.removeAttr("values")),scope.$watch(function(){return element.is(":visible")},function(){scope.values?$(target).sparkline(scope.values,options):$(target).sparkline("html",options)})}}}]),angular.module("theme.layout-horizontal",[]).controller("HorizontalPageController",["$scope","$global",function($scope,$global){$global.set("layoutHorizontal",!0),$scope.$on("$destroy",function(){$global.set("layoutHorizontal",!1)})}]).controller("HorizontalPage2Controller",["$scope","$global",function($scope,$global){$global.set("layoutHorizontal",!0),$global.set("layoutHorizontalLargeIcons",!0),$scope.$on("$destroy",function(){$global.set("layoutHorizontal",!1),$global.set("layoutHorizontalLargeIcons",!1)})}]),angular.module("theme.layout-boxed",[]).controller("BoxedPageController",["$scope","$global",function($scope,$global){$global.set("layoutBoxed",!0),$scope.$on("$destroy",function(){$global.set("layoutBoxed",!1)})}]),angular.module("theme.pages-controllers",[]).controller("SignupPageController",["$scope","$global",function($scope,$global){$global.set("fullscreen",!0),$scope.$on("$destroy",function(){$global.set("fullscreen",!1)})}]).controller("RegistrationPageController",["$scope","$timeout",function($scope,$timeout){$scope.checking=!1,$scope.checked=!1,$scope.checkAvailability=function(){0!=$scope.reg_form.username.$dirty&&($scope.checking=!0,$timeout(function(){$scope.checking=!1,$scope.checked=!0},500))}}]).controller("ChatRoomController",["$scope","$timeout",function($scope,$t){var eliza=new ElizaBot,avatars=["potter.png","tennant.png","johansson.png","jackson.png","jobs.png"];$scope.messages=[],$scope.userText="",$scope.elizaTyping=!1,$scope.elizaAvatar="johansson.png",$scope.sendMessage=function(msg){var im={"class":"me",avatar:"jackson.png",text:msg};this.messages.push(im),this.userText="",$t(function(){$scope.elizaAvatar=_.shuffle(avatars).shift(),$scope.elizaTyping=!0},500),$t(function(){var reply=eliza.transform(msg),im={"class":"chat-success",avatar:$scope.elizaAvatar,text:reply};$scope.elizaTyping=!1,$scope.messages.push(im)},1200)}}]).directive("scrollToBottom",function(){return{restrict:"A",scope:{model:"=scrollToBottom"},link:function(scope,element){scope.$watch("model",function(n,o){n!=o&&(element[0].scrollTop=element[0].scrollHeight)})}}}),angular.module("theme.form-directives",[]).directive("autosize",function(){return{restrict:"AC",link:function(scope,element){element.autosize({append:"\n"})}}}).directive("fullscreen",function(){return{restrict:"AC",link:function(scope,element){element.fseditor({maxHeight:500})}}}).directive("colorpicker",function(){return{restrict:"AC",link:function(scope,element){element.colorpicker()}}}).directive("daterangepicker",function(){return{restrict:"A",scope:{options:"=daterangepicker",start:"=dateBegin",end:"=dateEnd"},link:function(scope,element){element.daterangepicker(scope.options,function(start,end){scope.start&&(scope.start=start.format("MMMM D, YYYY")),scope.end&&(scope.end=end.format("MMMM D, YYYY")),scope.$apply()})}}}).directive("multiselect",function(){return{restrict:"A",link:function(scope,element){element.multiSelect()}}}).directive("wizard",function(){return{restrict:"A",scope:{options:"=wizard"},link:function(scope,element){scope.options?(element.stepy(scope.options),1==scope.options.validate&&element.validate({errorClass:"help-block",validClass:"help-block",highlight:function(element){$(element).closest(".form-group").addClass("has-error")},unhighlight:function(element){$(element).closest(".form-group").removeClass("has-error")}})):element.stepy(),element.find(".stepy-navigator").wrapInner('<div class="pull-right"></div>')}}}).directive("maskinput",function(){return{restrict:"A",link:function(scope,element){element.inputmask()}}}).directive("wysiwygCkeditor",function(){return{restrict:"A",scope:{options:"=wysiwygCkeditor"},link:function(scope,element,attr){return scope.options&&1==scope.options.inline?CKEDITOR.inline(attr.name||attr.id,scope.options):void CKEDITOR.replace(attr.name||attr.id,scope.options)}}}),angular.module("theme.form-validation",[]).controller("AngularFormValidationController",["$scope",function($scope){$scope.validateDemoForm={};angular.copy($scope.validateDemoForm);$scope.canResetValidationForm=function(){return $scope.validate_demo_form.$dirty},$scope.resetValidationForm=function(){$scope.validateDemoForm=angular.copy($scope.validateDemoFormOriginal),$scope.validate_demo_form.$setPristine()},$scope.canSubmitValidationForm=function(){return $scope.validate_demo_form.$valid},$scope.submit=function(){}}]),angular.module("theme.form-inline",[]).controller("InlineEditableController",["$scope","$filter","$http","$timeout",function($scope,$filter){$scope.user={name:"awesome user",status:2,group:4,groupName:"admin",email:"email@example.com",tel:"123-45-67",number:29,range:10,url:"http://example.com",search:"blabla",color:"#6a4415",date:null,time:"12:30",datetime:null,month:null,week:null,desc:"Awesome user \ndescription!",remember:!0,dob:new Date(1984,4,15),timebs:new Date(1984,4,15,19,20)},$scope.statuses=[{value:1,text:"status1"},{value:2,text:"status2"},{value:3,text:"status3"},{value:4,text:"status4"}],$scope.showStatus=function(){var selected=$filter("filter")($scope.statuses,{value:$scope.user.status});return $scope.user.status&&selected.length?selected[0].text:"Not set"},$scope.groups=[{id:1,text:"MVP"},{id:2,text:"VIP"},{id:3,text:"ADMIN"},{id:4,text:"USER"}],$scope.$watch("user.group",function(newVal,oldVal){if(newVal!==oldVal){var selected=$filter("filter")($scope.groups,{id:$scope.user.group});$scope.user.groupName=selected.length?selected[0].text:null}})}]),angular.module("theme.form-components",[]).controller("FormComponentsController",["$scope","$http",function($scope,$http){$scope.switchStatus=1,$scope.switchStatus2=1,$scope.switchStatus3=1,$scope.switchStatus4=1,$scope.switchStatus5=1,$scope.switchStatus6=1,$scope.getLocation=function(val){return $http.get("http://maps.googleapis.com/maps/api/geocode/json",{params:{address:val,sensor:!1}}).then(function(res){var addresses=[];return angular.forEach(res.data.results,function(item){addresses.push(item.formatted_address)}),addresses})},$scope.colorPicked="#fa4d4d",$scope.select2RemoteOptions={placeholder:"Search for a movie",minimumInputLength:3,width:"resolve",ajax:{url:"http://api.rottentomatoes.com/api/public/v1.0/movies.json",dataType:"jsonp",quietMillis:100,data:function(term,page){return{q:term,page_limit:10,page:page,apikey:"8vzys3eka2s9hpvkh7wwzp7e"}},results:function(data,page){var more=10*page<data.total;return{results:data.movies,more:more}}},formatResult:function(movie){var markup="<table class='movie-result'><tr>";return void 0!==movie.posters&&void 0!==movie.posters.thumbnail&&(markup+="<td class='movie-image'><img src='"+movie.posters.thumbnail+"'/></td>"),markup+="<td class='movie-info'><div class='movie-title'>"+movie.title+"</div>",void 0!==movie.critics_consensus?markup+="<div class='movie-synopsis'>"+movie.critics_consensus+"</div>":void 0!==movie.synopsis&&(markup+="<div class='movie-synopsis'>"+movie.synopsis+"</div>"),markup+="</td></tr></table>"},formatSelection:function(movie){return movie.title},dropdownCssClass:"bigdrop",escapeMarkup:function(m){return m}},$scope.tagList=["tag1","tag2"],$scope.select2TaggingOptions={multiple:!0,simple_tags:!0,tags:["tag1","tag2","tag3","tag4"]},$scope.multiSelect1=[],$scope.multiSelect2=[]}]).controller("DatepickerDemoController",["$scope",function($scope){$scope.today=function(){$scope.dt=new Date},$scope.today(),$scope.clear=function(){$scope.dt=null},$scope.disabled=function(date,mode){return"day"===mode&&(0===date.getDay()||6===date.getDay())},$scope.toggleMin=function(){$scope.minDate=$scope.minDate?null:new Date},$scope.toggleMin(),$scope.open=function($event){$event.preventDefault(),$event.stopPropagation(),$scope.opened=!0},$scope.dateOptions={formatYear:"yy",startingDay:1},$scope.initDate=new Date("2016-15-20"),$scope.formats=["dd-MMMM-yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"],$scope.format=$scope.formats[0]}]).controller("TimepickerDemoCtrl",["$scope",function($scope){$scope.mytime=new Date,$scope.hstep=1,$scope.mstep=15,$scope.options={hstep:[1,2,3],mstep:[1,5,10,15,25,30]},$scope.ismeridian=!0,$scope.toggleMode=function(){$scope.ismeridian=!$scope.ismeridian},$scope.update=function(){var d=new Date;d.setHours(14),d.setMinutes(0),$scope.mytime=d},$scope.changed=function(){console.log("Time changed to: "+$scope.mytime)},$scope.clear=function(){$scope.mytime=null}}]).controller("DateRangePickerDemo",["$scope",function($scope){$scope.drp_start=moment().subtract("days",1).format("MMMM D, YYYY"),$scope.drp_end=moment().add("days",31).format("MMMM D, YYYY"),$scope.drp_options={ranges:{Today:[moment(),moment()],Yesterday:[moment().subtract("days",1),moment().subtract("days",1)],"Last 7 Days":[moment().subtract("days",6),moment()],"Last 30 Days":[moment().subtract("days",29),moment()],"This Month":[moment().startOf("month"),moment().endOf("month")],"Last Month":[moment().subtract("month",1).startOf("month"),moment().subtract("month",1).endOf("month")]},opens:"left",startDate:moment().subtract("days",29),endDate:moment()}}]),angular.module("theme.template-overrides",[]).config(["$provide",function($provide){$provide.decorator("tabsetDirective",function($delegate){return $delegate[0].templateUrl=function(element,attr){return attr.tabPosition||attr.tabTheme?!attr.tabPosition||"'bottom'"!=attr.tabPosition&&"bottom"!=attr.tabPosition?"../views/templates/themed-tabs.html":"../views/templates/themed-tabs-bottom.html":attr.panelTabs&&void 0!==attr.heading?"../views/templates/panel-tabs.html":attr.panelTabs&&void 0==attr.heading?"../views/templates/panel-tabs-without-heading.html":"../views/templates/themed-tabs.html"},angular.extend($delegate[0].scope,{heading:"@",panelClass:"@",panelIcon:"@",theme:"@tabTheme",position:"@tabPosition"}),$delegate}),$provide.decorator("progressbarDirective",function($delegate){return $delegate[0].templateUrl=function(element,attr){return attr.contextual&&"true"==attr.contextual?"../views/templates/contextual-progressbar.html":"../views/template/progressbar/progressbar.html"},angular.extend($delegate[0].scope,{heading:"@"}),$delegate})}]).run(["$templateCache",function($templateCache){$templateCache.put("footerTemplate.html",'<div ng-show="showFooter" class="ng-grid-footer" ng-style="footerStyle()">\r\n    <div class="col-md-4" >\r\n        <div class="ngFooterTotalItems" ng-class="{\'ngNoMultiSelect\': !multiSelect}" >\r\n            <span class="ngLabel">{{i18n.ngTotalItemsLabel}} {{maxRows()}}</span><span ng-show="filterText.length > 0" class="ngLabel">({{i18n.ngShowingItemsLabel}} {{totalFilteredItemsLength()}})</span>\r\n        </div>\r\n        <div class="ngFooterSelectedItems" ng-show="multiSelect">\r\n            <span class="ngLabel">{{i18n.ngSelectedItemsLabel}} {{selectedItems.length}}</span>\r\n        </div>\r\n    </div>\r\n    <div class="col-md-4" ng-show="enablePaging" ng-class="{\'ngNoMultiSelect\': !multiSelect}">\r\n            <label class="control-label ng-grid-pages center-block">{{i18n.ngPageSizeLabel}}\r\n               <select class="form-control input-sm" ng-model="pagingOptions.pageSize" >\r\n                      <option ng-repeat="size in pagingOptions.pageSizes">{{size}}</option>\r\n                </select>\r\n        </label>\r\n</div>\r\n     <div class="col-md-4">\r\n        <div class="pull-right ng-grid-pagination">\r\n            <button type="button" class="btn btn-default btn-sm" ng-click="pageToFirst()" ng-disabled="cantPageBackward()" title="{{i18n.ngPagerFirstTitle}}"><i class="fa fa-angle-double-left"></i></button>\r\n            <button type="button" class="btn btn-default btn-sm" ng-click="pageBackward()" ng-disabled="cantPageBackward()" title="{{i18n.ngPagerPrevTitle}}"><i class="fa fa-angle-left"></i></button>\r\n            <label class="control-label">\r\n                   <input class="form-control input-sm" min="1" max="{{currentMaxPages}}" type="number" style="width:50px; height: 24px; margin-top: 1px; padding: 0 4px;" ng-model="pagingOptions.currentPage"/>\r\n            </label>\r\n            <span class="ngGridMaxPagesNumber" ng-show="maxPages() > 0">/ {{maxPages()}}</span>\r\n            <button type="button" class="btn btn-default btn-sm" ng-click="pageForward()" ng-disabled="cantPageForward()" title="{{i18n.ngPagerNextTitle}}"><i class="fa fa-angle-right"></i></button>\r\n            <button type="button" class="btn btn-default btn-sm" ng-click="pageToLast()" ng-disabled="cantPageToLast()" title="{{i18n.ngPagerLastTitle}}"><i class="fa fa-angle-double-right"></i></button>\r\n        </div>\r\n     </div>\r\n</div>\r\n'),$templateCache.put("template/rating/rating.html",'<span ng-mouseleave="reset()" ng-keydown="onKeydown($event)" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="{{range.length}}" aria-valuenow="{{value}}">\n    <i ng-repeat="r in range track by $index" ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="fa" ng-class="$index < value && (r.stateOn || \'fa-star\') || (r.stateOff || \'fa-star-o\')">\n        <span class="sr-only">({{ $index < value ? \'*\' : \' \' }})</span>\n    </i>\n</span>')}]),angular.module("theme.templates",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/bs-modal.html",'<div class="modal-header">\n    <h3 class="modal-title">I\'m a modal!</h3>\n</div>\n<div class="modal-body">\n    <ul>\n        <li ng-repeat="item in items">\n            <a ng-click="selected.item = item">{{ item }}</a>\n        </li>\n    </ul>\n    Selected: <b>{{ selected.item }}</b>\n</div>\n<div class="modal-footer">\n    <button class="btn btn-primary" ng-click="ok()">OK</button>\n    <button class="btn btn-warning" ng-click="cancel()">Cancel</button>\n</div>\n'),$templateCache.put("templates/contextual-progressbar.html",'<div class="contextual-progress">\n	<div class="clearfix">\n		<div class="progress-title">{{heading}}</div>\n		<div class="progress-percentage">{{percent | number:0}}%</div>\n	</div>\n	<div class="progress">\n		<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: percent + \'%\'}" aria-valuetext="{{percent | number:0}}%" ng-transclude></div>\n	</div>\n</div>\n'),$templateCache.put("templates/nav_renderer.html",'<a ng-click="select(item)" ng-href="{{item.url}}">\n	<i ng-if="item.iconClasses" class="{{item.iconClasses}}"></i><span>{{item.label}}</span>\n	<span ng-bind-html="item.html"></span>\n</a>\n<ul ng-if="item.children.length" data-slide-out-nav="item.open">\n    <li ng-repeat="item in item.children"\n	    ng-class="{ hasChild: (item.children!==undefined),\n                      active: item.selected,\n                        open: (item.children!==undefined) && item.open }"\n    	ng-include="\'views/templates/nav_renderer.html\'"\n    ></li>\n</ul>\n'),$templateCache.put("templates/panel-tabs-without-heading.html",'<div class="panel {{panelClass}}">\n  <div class="panel-heading">\n        <h4>\n            <ul class="nav nav-{{type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n        </h4>\n  </div>\n  <div class="panel-body">\n    <div class="tab-content">\n        <div class="tab-pane"\n            ng-repeat="tab in tabs"\n            ng-class="{active: tab.active}"\n            tab-content-transclude="tab">\n        </div>\n    </div>\n  </div>\n</div>\n'),$templateCache.put("templates/panel-tabs.html",'<div class="panel {{panelClass}}">\n  <div class="panel-heading">\n        <h4><i ng-if="panelIcon" class="{{panelIcon}}"></i>{{(panelIcon? " ":"")+heading}}</h4>\n        <div class="options">\n            <ul class="nav nav-{{type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n        </div>\n  </div>\n  <div class="panel-body">\n    <div class="tab-content">\n        <div class="tab-pane"\n            ng-repeat="tab in tabs"\n            ng-class="{active: tab.active}"\n            tab-content-transclude="tab">\n        </div>\n    </div>\n  </div>\n</div>\n'),$templateCache.put("templates/panel.html",'<div class="panel {{panelClass}}">\n  <div class="panel-heading">\n        <h4><i ng-if="panelIcon" class="{{panelIcon}}"></i>{{(panelIcon? " ":"")+heading}}</h4>\n        <div class="options">\n        </div>\n  </div>\n  <div class="panel-body" ng-transclude>\n  </div>\n</div>\n'),$templateCache.put("templates/themed-tabs-bottom.html",'<div class="tab-container tab-{{theme || \'primary\'}} tab-{{position || \'normal\'}}">\n  <div class="tab-content">\n    <div class="tab-pane"\n        ng-repeat="tab in tabs"\n        ng-class="{active: tab.active}"\n        tab-content-transclude="tab">\n    </div>\n  </div>\n  <ul class="nav nav-{{type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n</div>\n'),$templateCache.put("templates/themed-tabs.html",'<div class="tab-container tab-{{theme || \'primary\'}} tab-{{position || \'normal\'}}">\n  <ul class="nav nav-{{type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane"\n        ng-repeat="tab in tabs"\n        ng-class="{active: tab.active}"\n        tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n'),$templateCache.put("templates/tile-generic.html",'<div class="info-tiles tiles-{{type}}">\n	<div class="tiles-heading">\n		{{heading}}\n	</div>\n	<div class="tiles-body" ng-transclude>\n	</div>\n</div>\n'),$templateCache.put("templates/tile-large.html",'<a class="info-tiles tiles-{{item.color}}" ng-href="{{item.href}}">\n    <div class="tiles-heading">\n        <div class="pull-left">{{item.title}}</div>\n        <div class="pull-right">{{item.titleBarInfo}}</div>\n    </div>\n    <div class="tiles-body">\n        <div class="pull-left"><i class="{{item.classes}}"></i></div>\n        <div class="pull-right" ng-show="item.text">{{item.text}}</div>\n        <div class="pull-right" ng-show="!item.text" ng-transclude></div>\n    </div>\n</a>\n'),$templateCache.put("templates/tile-mini.html",'<a class="shortcut-tiles tiles-{{item.color}}" ng-href="{{item.href}}">\n	<div class="tiles-body">\n		<div class="pull-left"><i class="{{item.classes}}"></i></div>\n		<div class="pull-right"><span class="badge">{{item.titleBarInfo}}</span></div>\n	</div>\n	<div class="tiles-footer">\n		{{item.text}}\n	</div>\n</a>\n')}]),angular.module("theme.navigation-controller",[]).controller("NavigationController",function($scope,$rootScope,$location,$timeout,$global,User,$filter,Utils,api){function setSubNavTabs(){if($scope.subNavTabs=[],User.signedIn()){var currentUser=User.getCurrent();if("chapter"==currentUser.Users_type&&"complete"==currentUser.Users_complete)$scope.subNavTabs=[{label:"myCampus",iconClasses:"fa fa-rocket",url:"#/myCampus"}],"president"==currentUser.ChapterUserRoles_name&&($scope.subNavTabs.push(currentUser.numChapterRequests>0?{label:"Pending Requests",url:"#/pending-chapter-requests",iconClasses:"fa fa-rocket",html:'<span class="badge badge-indigo">'+currentUser.numChapterRequests+"</span>"}:{label:"Pending Requests",url:"#/pending-chapter-requests",iconClasses:"fa fa-rocket"}),$scope.subNavTabs.push({label:"President Dash",url:"#/chapter/admin",iconClasses:"fa fa-rocket"})),api.get("recruitments",{active:!0,Universities_id:currentUser.Universities_id,Councils_gender:currentUser.Users_gender,Chapters_id:currentUser.Chapters_id,attachChapterRecruitments:!0}).then(function(recruitment){if(recruitment.length>0){var recruitmentSubSubTabs=[];
console.log(recruitment[0]),recruitmentSubSubTabs.push({iconClasses:"fa fa-list",label:"Chapter Directory",url:"#/myRecruitment/chapter-directory"},{iconClasses:"fa fa-calendar",label:"Events",url:"#/myRecruitment/events"},{iconClasses:"fa fa-user",label:"Dash",url:"#/myRecruitment/dash"}),$scope.subNavTabs.push({label:"myRecruitment",iconClasses:"fa fa-sign-in",children:recruitmentSubSubTabs})}});else if("council"==currentUser.Users_type)$scope.subNavTabs=[{label:"myCampus",iconClasses:"fa fa-rocket",url:"#/myCampus"},{label:"Recruitments",iconClasses:"fa fa-rocket",url:"#/recruitments"}];else if("university"==currentUser.Users_type){var recruitmentSubSubTabs=[];Utils.isEmpty(currentUser.recruitments)||currentUser.recruitments.forEach(function(recruitment){recruitmentSubSubTabs.push({iconClasses:"fa fa-rocket",label:recruitment.Councils_name+" - "+$filter("date")(new Date(recruitment.Recruitments_start),"MM/dd/yyyy"),url:"#/recruitment/"+recruitment.Recruitments_id})}),$scope.subNavTabs=[{label:"Recruitments",iconClasses:"fa fa-rocket",children:recruitmentSubSubTabs}],$scope.subNavTabs.push({label:"Admin Dash",url:"#/universities/admin",iconClasses:"fa fa-rocket"})}setParent($scope.subNavTabs,null)}}$scope.publicNavTabs=[{label:"About",iconClasses:"fa fa-plus",url:"#/about"},{label:"Login",iconClasses:"fa fa-home",url:"#/login"},{label:"Join",iconClasses:"fa fa-rocket",url:"#/"}],$scope.mainNavTabs=[{label:"Home",iconClasses:"fa fa-home",url:"#/home"},{label:"Organizations",iconClasses:"fa fa-building",url:"#/organizations"},{label:"Universities",iconClasses:"fa fa-university",url:"#/universities"},{label:"Events",iconClasses:"fa fa-calendar",url:"#/events"}];var setParent=function(children,parent){angular.forEach(children,function(child){child.parent=parent,void 0!==child.children&&setParent(child.children,child)})};$scope.subNavTabs=[],$rootScope.$on("user.set",setSubNavTabs),setSubNavTabs(),$scope.findItemByUrl=function(children,url){for(var i=0,length=children.length;length>i;i++){if(children[i].url&&children[i].url.replace("#","")==url)return children[i];if(void 0!==children[i].children){var item=$scope.findItemByUrl(children[i].children,url);if(item)return item}}},setParent($scope.publicNavTabs,null),setParent($scope.mainNavTabs,null),$scope.openItems=[],$scope.selectedItems=[],$scope.selectedFromNavMenu=!1,$scope.select=function(item){if(item.open)return void(item.open=!1);for(var i=$scope.openItems.length-1;i>=0;i--)$scope.openItems[i].open=!1;$scope.openItems=[];for(var parentRef=item;null!=parentRef;)parentRef.open=!0,$scope.openItems.push(parentRef),parentRef=parentRef.parent;if(!item.children||item.children&&item.children.length<1){$scope.selectedFromNavMenu=!0;for(var j=$scope.selectedItems.length-1;j>=0;j--)$scope.selectedItems[j].selected=!1;$scope.selectedItems=[];for(var parentRef=item;null!=parentRef;)parentRef.selected=!0,$scope.selectedItems.push(parentRef),parentRef=parentRef.parent}},$scope.$watch(function(){return $location.path()},function(newVal){if($scope.selectedFromNavMenu===!1){var item=$scope.findItemByUrl($scope.publicNavTabs,newVal);item&&$timeout(function(){$scope.select(item)})}$scope.selectedFromNavMenu=!1})}),angular.module("theme.notifications-controller",[]).controller("NotificationsController",["$scope","$filter",function($scope,$filter){$scope.notifications=[{text:"Server#1 is live",time:"4m","class":"notification-success",iconClasses:"fa fa-check",seen:!0},{text:"New user Registered",time:"10m","class":"notification-user",iconClasses:"fa fa-user",seen:!1},{text:"CPU at 92% on server#3!",time:"22m","class":"notification-danger",iconClasses:"fa fa-bolt",seen:!1},{text:"Database overloaded",time:"30m","class":"notification-warning",iconClasses:"fa fa-warning",seen:!1},{text:"New order received",time:"1h","class":"notification-order",iconClasses:"fa fa-shopping-cart",seen:!0},{text:"Application error!",time:"9d","class":"notification-danger",iconClasses:"fa fa-times",seen:!0},{text:"Installation Succeeded",time:"1d","class":"notification-success",iconClasses:"fa fa-check",seen:!1},{text:"Account Created",time:"2d","class":"notification-success",iconClasses:"fa fa-check",seen:!1}],$scope.setSeen=function(item,$event){$event.preventDefault(),$event.stopPropagation(),item.seen=!0},$scope.setUnseen=function(item,$event){$event.preventDefault(),$event.stopPropagation(),item.seen=!1},$scope.setSeenAll=function($event){$event.preventDefault(),$event.stopPropagation(),angular.forEach($scope.notifications,function(item){item.seen=!0})},$scope.unseenCount=$filter("filter")($scope.notifications,{seen:!1}).length,$scope.$watch("notifications",function(notifications){$scope.unseenCount=$filter("filter")(notifications,{seen:!1}).length},!0)}]),angular.module("theme.messages-controller",[]).controller("MessagesController",["$scope","$filter",function($scope,$filter){$scope.messages=[{name:"Polly Paton",message:"Uploaded all the files to server",time:"3m","class":"notification-danger",thumb:"assets/demo/avatar/paton.png",read:!1},{name:"Simon Corbett",message:"I am signing off for today",time:"17m","class":"notification-danger",thumb:"assets/demo/avatar/corbett.png",read:!1},{name:"Matt Tennant",message:"Everything is working just fine here",time:"2h","class":"notification-danger",thumb:"assets/demo/avatar/tennant.png",read:!0},{name:"Alan Doyle",message:"Please mail me the files by tonight",time:"5d","class":"notification-danger",thumb:"assets/demo/avatar/doyle.png",read:!1},{name:"Polly Paton",message:"Uploaded all the files to server",time:"3m","class":"notification-danger",thumb:"assets/demo/avatar/paton.png",read:!1},{name:"Simon Corbett",message:"I am signing off for today",time:"17m","class":"notification-danger",thumb:"assets/demo/avatar/corbett.png",read:!1},{name:"Matt Tennant",message:"Everything is working just fine here",time:"2h","class":"notification-danger",thumb:"assets/demo/avatar/tennant.png",read:!0},{name:"Alan Doyle",message:"Please mail me the files by tonight",time:"5d","class":"notification-danger",thumb:"assets/demo/avatar/doyle.png",read:!1}],$scope.setRead=function(item,$event){$event.preventDefault(),$event.stopPropagation(),item.read=!0},$scope.setUnread=function(item,$event){$event.preventDefault(),$event.stopPropagation(),item.read=!1},$scope.setReadAll=function($event){$event.preventDefault(),$event.stopPropagation(),angular.forEach($scope.messages,function(item){item.read=!0})},$scope.unseenCount=$filter("filter")($scope.messages,{read:!1}).length,$scope.$watch("messages",function(messages){$scope.unseenCount=$filter("filter")(messages,{read:!1}).length},!0)}]),angular.module("theme.colorpicker-controller",[]).controller("ColorPickerController",["$scope","$global",function($scope,$global){$scope.headerStylesheet="default.css",$scope.sidebarStylesheet="default.css",$scope.headerBarHidden=$global.get("headerBarHidden"),$scope.layoutFixed=$global.get("layoutBoxed"),$scope.setHeaderStyle=function(filename,$event){$event.preventDefault(),$event.stopPropagation(),$scope.headerStylesheet=filename},$scope.setSidebarStyle=function(filename,$event){$event.preventDefault(),$event.stopPropagation(),$scope.sidebarStylesheet=filename},$scope.$watch("headerFixed",function(newVal){$global.set("fixedHeader",newVal)}),$scope.$watch("layoutFixed",function(newVal){$global.set("layoutBoxed",newVal)}),$scope.$on("globalStyles:changed:layoutBoxed",function(event,newVal){$scope.layoutFixed=newVal})}]),angular.module("theme.dashboard",[]).controller("DashboardController",["$scope",function($scope){$scope.percentages=[53,65,23,99],$scope.randomizePie=function(){$scope.percentages=_.shuffle($scope.percentages)};$scope.plotStatsData=[{data:[[1,1100],[2,1400],[3,1200],[4,800],[5,600],[6,800],[7,700],[8,900],[9,1700],[10,1200]],label:"View Count"}],$scope.plotStatsOptions={series:{lines:{show:!0,lineWidth:1.5,fill:.1},points:{show:!0},shadowSize:0},grid:{labelMargin:10,hoverable:!0,clickable:!0,borderWidth:0},tooltip:!0,tooltipOpts:{defaultTheme:!1,content:"View Count: %y"},colors:["#b3bcc7"],xaxis:{tickColor:"transparent",tickDecimals:0,autoscaleMargin:0,font:{color:"rgba(0,0,0,0.4)",size:11}},yaxis:{ticks:4,tickDecimals:0,tickColor:"rgba(0,0,0,0.04)",font:{color:"rgba(0,0,0,0.4)",size:11},tickFormatter:function(val){return val>999?val/1e3+"K":val}},legend:{labelBoxBorderColor:"transparent"}};$scope.plotRevenueData=[{data:[[1,1100],[2,1400],[3,1200],[4,800],[5,600],[6,800],[7,700],[8,900],[9,700],[10,300]],label:"Revenues"}],$scope.plotRevenueOptions={series:{bars:{show:!0,fill:1,lineWidth:0,barWidth:.6,align:"center"},points:{show:!1},shadowSize:0},grid:{labelMargin:10,hoverable:!0,clickable:!0,borderWidth:0},tooltip:!0,tooltipOpts:{defaultTheme:!1,content:"Revenue: %y"},colors:["#b3bcc7"],xaxis:{tickColor:"transparent",tickDecimals:0,autoscaleMargin:0,font:{color:"rgba(0,0,0,0.4)",size:11}},yaxis:{ticks:4,tickDecimals:0,tickColor:"rgba(0,0,0,0.04)",font:{color:"rgba(0,0,0,0.4)",size:11},tickFormatter:function(val){return val>999?"$"+val/1e3+"K":"$"+val}},legend:{labelBoxBorderColor:"transparent"}},$scope.currentPage=1,$scope.itemsPerPage=7,$scope.accountsInRange=function(){return this.userAccounts.slice(7*this.currentPage,7*this.currentPage+7)},$scope.uaHandle=function($index){this.userAccounts.splice($index,1)},$scope.uaHandleSelected=function(){this.userAccounts=_.filter(this.userAccounts,function(item){return 0==item.rem||void 0==item.rem})};var avatars=["potter.png","tennant.png","johansson.png","jackson.png","jobs.png"];$scope.userAccounts=[{picture:_.shuffle(avatars).shift(),name:"Foreman Bullock",email:"foremanbullock@geemail.com"},{picture:_.shuffle(avatars).shift(),name:"Alberta Ochoa",email:"albertaochoa@geemail.com"},{picture:_.shuffle(avatars).shift(),name:"Terry Hahn",email:"terryhahn@geemail.com"},{picture:_.shuffle(avatars).shift(),name:"Donovan Doyle",email:"donovandoyle@geemail.com"},{picture:_.shuffle(avatars).shift(),name:"Stacie Blankenship",email:"stacieblankenship@geemail.com"},{picture:_.shuffle(avatars).shift(),name:"Julie Nunez",email:"julienunez@geemail.com"},{picture:_.shuffle(avatars).shift(),name:"Lacey Farrell",email:"laceyfarrell@geemail.com"},{picture:_.shuffle(avatars).shift(),name:"Stacy Cooke",email:"stacycooke@geemail.com"},{picture:_.shuffle(avatars).shift(),name:"Teri Frost",email:"terifrost@geemail.com"},{picture:_.shuffle(avatars).shift(),name:"Dionne Payne",email:"dionnepayne@geemail.com"},{picture:_.shuffle(avatars).shift(),name:"Kaufman Garrison",email:"kaufmangarrison@geemail.com"},{picture:_.shuffle(avatars).shift(),name:"Curry Avery",email:"curryavery@geemail.com"},{picture:_.shuffle(avatars).shift(),name:"Carr Sharp",email:"carrsharp@geemail.com"},{picture:_.shuffle(avatars).shift(),name:"Cooper Scott",email:"cooperscott@geemail.com"},{picture:_.shuffle(avatars).shift(),name:"Juana Spencer",email:"juanaspencer@geemail.com"},{picture:_.shuffle(avatars).shift(),name:"Madelyn Marks",email:"madelynmarks@geemail.com"},{picture:_.shuffle(avatars).shift(),name:"Bridget Ray",email:"bridgetray@geemail.com"},{picture:_.shuffle(avatars).shift(),name:"Santos Christensen",email:"santoschristensen@geemail.com"},{picture:_.shuffle(avatars).shift(),name:"Geneva Rivers",email:"genevarivers@geemail.com"},{picture:_.shuffle(avatars).shift(),name:"Carmella Bond",email:"carmellabond@geemail.com"},{picture:_.shuffle(avatars).shift(),name:"Duke Munoz",email:"dukemunoz@geemail.com"},{picture:_.shuffle(avatars).shift(),name:"Ramos Rasmussen",email:"ramosrasmussen@geemail.com"},{picture:_.shuffle(avatars).shift(),name:"Maricela Sweeney",email:"maricelasweeney@geemail.com"},{picture:_.shuffle(avatars).shift(),name:"Carmen Riley",email:"carmenriley@geemail.com"},{picture:_.shuffle(avatars).shift(),name:"Whitfield Hartman",email:"whitfieldhartman@geemail.com"},{picture:_.shuffle(avatars).shift(),name:"Jasmine Keith",email:"jasminekeith@geemail.com"},{picture:_.shuffle(avatars).shift(),name:"Baker Juarez",email:"bakerjuarez@geemail.com"}]}]);var app=angular.module("greekRush",["ui.bootstrap","ui.bootstrap.pagination","theme.template-overrides","theme.services","theme.directives","theme.navigation-controller","theme.form-components","theme.form-directives","theme.form-validation","theme.form-inline","theme.dashboard","ngCookies","ngResource","ngSanitize","ngRoute","ngAnimate","facebook","Utils"]).controller("MainController",function($scope,$global,$timeout,User,$rootScope){$rootScope.userGot=!1,$scope.style_fixedHeader=$global.get("fixedHeader"),$scope.style_headerBarHidden=$global.get("headerBarHidden"),$scope.style_layoutBoxed=$global.get("layoutBoxed"),$scope.style_fullscreen=$global.get("fullscreen"),$scope.style_leftbarCollapsed=$global.get("leftbarCollapsed"),$scope.style_leftbarShown=$global.get("leftbarShown"),$scope.style_rightbarCollapsed=$global.get("rightbarCollapsed"),$scope.style_isSmallScreen=!1,$scope.style_showSearchCollapsed=$global.get("showSearchCollapsed"),$scope.hideSearchBar=function(){$global.set("showSearchCollapsed",!1)},$scope.hideHeaderBar=function(){$global.set("headerBarHidden",!0)},$scope.showHeaderBar=function($event){$event.stopPropagation(),$global.set("headerBarHidden",!1)},$scope.toggleLeftBar=function(){return $scope.style_isSmallScreen?$global.set("leftbarShown",!$scope.style_leftbarShown):void $global.set("leftbarCollapsed",!$scope.style_leftbarCollapsed)},$scope.toggleRightBar=function(){$global.set("rightbarCollapsed",!$scope.style_rightbarCollapsed)},$scope.$on("globalStyles:changed",function(event,newVal){$scope["style_"+newVal.key]=newVal.value}),$scope.$on("globalStyles:maxWidth767",function(event,newVal){$timeout(function(){$scope.style_isSmallScreen=newVal,newVal?$global.set("leftbarCollapsed",!1):$global.set("leftbarShown",!1)})}),$scope.logOut=function(){User.logout()},$scope.rightbarAccordionsShowOne=!1,$scope.rightbarAccordions=[{open:!0},{open:!0},{open:!0},{open:!0},{open:!0},{open:!0},{open:!0}]}).config(["$provide","$routeProvider","FacebookProvider",function($provide,$routeProvider,FacebookProvider){FacebookProvider.init("673581516009551");var userLoginRequired=function($q,$location,User){var deferred=$q.defer();return User.signedIn()?(deferred.resolve(User.getCurrent()),deferred.promise):(User.getUserFromDB().then(function(user){deferred.resolve(user)},function(){deferred.reject(),$location.url("/"),console.log("denied access: userLoginRequired()")}),deferred.promise)},userTypeRequired=function(type){var types="string"==typeof type?[type]:type;return function($q,$location,User,api){var deferred=$q.defer();return userLoginRequired($q,$location,User,api).then(function(user){-1===types.indexOf(user.Users_type)?(deferred.reject(),$location.url("/home"),console.log("denied access: "+type+" user required")):deferred.resolve(user)},function(){deferred.reject(),$location.url("/home")}),deferred.promise}};$routeProvider.when("/",{title:"Welcome to GreekRush!",templateUrl:"views/user/sign-up.html",controller:"AuthCtrl",publicAccess:!0}).when("/about",{title:"About",templateUrl:"views/basic/about.html",controller:"AboutCtrl",publicAccess:!1}).when("/home",{title:"Home",templateUrl:"views/user/home.html",controller:"DashCtrl",resolve:{userLoginRequired:userLoginRequired}}).when("/complete-info",{title:"Complete Info",templateUrl:"views/user/information.html",controller:"SignUpCtrl",publicAccess:!1,resolve:{userLoginRequired:userLoginRequired}}).when("/settings",{title:"Settings",templateUrl:"views/user/settings.html",controller:"UserSettingsCtrl",publicAccess:!1,resolve:{userLoginRequired:userLoginRequired}}).when("/user/:userId",{title:"Profile",templateUrl:"views/user/profile.html",controller:"ProfileCtrl",publicAccess:!1,resolve:{userLoginRequired:userLoginRequired}}).when("/forgotpassword",{title:"Forgot Password",templateUrl:"views/user/forgot_password.html",controller:"AuthCtrl",publicAccess:!0}).when("/passwordreset/:Users_id/:code",{title:"Password Reset",templateUrl:"views/user/reset_pass.html",controller:"ResetPassCtrl",publicAccess:!0}).when("/recruitments",{title:"Recruitments",templateUrl:"views/recruitment/recruitments.html",controller:"RecruitmentsCtrl",resolve:{userLoginRequired:userTypeRequired("council")}}).when("/recruitment/:Recruitments_id",{title:"Recruitment",templateUrl:"views/recruitment/recruitment.html",controller:"UniversityRecruitmentCtrl",resolve:{userLoginRequired:userTypeRequired("university")}}).when("/organizations",{title:"Organizations",templateUrl:"views/org/organizations.html",controller:"OrgsCtrl",publicAccess:!1,resolve:{getUserData:userLoginRequired}}).when("/organizations/:orgId",{title:"Organizations",templateUrl:"views/org/organization.html",controller:"OrgCtrl",publicAccess:!1,resolve:{getUserData:userLoginRequired}}).when("/universities",{title:"Universities",templateUrl:"views/university/universities.html",controller:"UniversitiesCtrl",publicAccess:!1,resolve:{userLoginRequired:userLoginRequired}}).when("/universities/admin",{title:"Universities",templateUrl:"views/university/dash.html",controller:"UniversityDashCtrl",publicAccess:!1,resolve:{userLoginRequired:userTypeRequired("university")}}).when("/universities/:universityId",{title:"University",templateUrl:"views/university/university.html",controller:"UniversityCtrl",publicAccess:!1,resolve:{userLoginRequired:userLoginRequired}}).when("/chapter/admin",{title:"Chapter Settings",templateUrl:"views/user/admin/chapter.html",controller:"ChapterAdminCtrl",publicAccess:!1,resolve:{userLoginRequired:userTypeRequired("chapter")}}).when("/myRecruitment/chapter-directory",{title:"Chapter Directory",templateUrl:"views/recruitment/myRecruitment/chapter-directory.html",controller:"MyRecruitmentCtrl",publicAccess:!1,resolve:{userLoginRequired:userLoginRequired}}).when("/myRecruitment/dash",{title:"Chapter Directory",templateUrl:"views/recruitment/myRecruitment/dash.html",controller:"MyRecruitmentCtrl",publicAccess:!1,resolve:{userLoginRequired:userLoginRequired}}).when("/myRecruitment/events",{title:"Chapter Directory",templateUrl:"views/recruitment/myRecruitment/events.html",controller:"MyRecruitmentCtrl",publicAccess:!1,resolve:{userLoginRequired:userLoginRequired}}).when("/organizations/:orgName/:chapterName",{title:"Chapter",templateUrl:"views/chapter/chapter.html",controller:"ChapterCtrl",publicAccess:!1,resolve:{getUserData:userLoginRequired}}).when("/myCampus/join-recruitment",{title:"Current Recruitment",templateUrl:"views/recruitment/signup.html",controller:"RecruitmentSignUpCtrl",publicAccess:!1,resolve:{userLoginRequired:userLoginRequired}}).when("/myCampus",{title:"myCampus",templateUrl:"views/user/myCampus.html",controller:"CampusCtrl",publicAccess:!1,resolve:{userLoginRequired:userLoginRequired}}).when("/events",{title:"Events",templateUrl:"views/event/calendar.html",controller:"EventsCtrl",publicAccess:!1,resolve:{userLoginRequired:userLoginRequired}}).when("/pending-chapter-requests",{title:"Pending Requests",templateUrl:"views/chapter/requests.html",controller:"ChapterRequestsCtrl",publicAccess:!1,resolve:{userLoginRequired:userTypeRequired("chapter")}}).otherwise({redirectTo:"/"})}]).run(function($rootScope,$location,$route,api,Utils){window.debug={rootScope:$rootScope,api:api};var routesOpenToPublic=[],superAdminRoutes=[];angular.forEach($route.routes,function(route,path){route.publicAccess&&routesOpenToPublic.push(path),"superadmin"===route.special&&superAdminRoutes.push(path)}),$rootScope.$on("$routeChangeSuccess",function(event,current){Utils.isEmpty(current.$$route,"title")||($rootScope.title=current.$$route.title)}),$rootScope.$on("$routeChangeStart",function(){-1===routesOpenToPublic.indexOf($location.path()),-1<superAdminRoutes.indexOf($location.path());console.log("path = "+$location.path())})}).filter("reformatdate",function($filter){return function(input,format){return null===input?"":$filter("date")(new Date(input),format)}});app.factory("User",function($rootScope,$location,$q,api,$timeout){function set(user){console.log("set user function user = ",user),$rootScope.currentUser=user,$rootScope.$broadcast("user.set",user)}$rootScope.userGot=!1;var User={getUserFromDB:function(){var deferred=$q.defer();return api.call("user").then(function(user){User.setCurrent(user),deferred.resolve(user)},function(){deferred.reject()})['finally'](function(){$timeout(function(){$rootScope.userGot=!0})}),deferred.promise},updateUniversity:function(new_data){var deferred=$q.defer();return api.post("update_user_university",new_data).then(function(){return api.post("user",{Users_complete:"active"})}).then(function(updatedUser){set(updatedUser),deferred.resolve(updatedUser)})['catch'](function(errors){console.log(errors),deferred.reject(errors)}),deferred.promise},updateChapter:function(new_data){var deferred=$q.defer();return api.post("user/join_chapter",new_data).then(function(){return api.post("user",{Users_complete:"complete"})}).then(function(updatedUser){set(updatedUser),deferred.resolve(updatedUser)})['catch'](function(errors){console.log(errors),deferred.reject(errors)}),deferred.promise},getCurrent:function(){return $rootScope.currentUser},signedIn:function(){return"undefined"!=typeof $rootScope.currentUser&&null!==$rootScope.currentUser},getSpecial:function(){var current=User.getCurrent();return current.special},update:function(new_data){var deferred=$q.defer();return api.call("user",{method:"POST",data:new_data}).then(function(updatedUser){set(updatedUser),deferred.resolve(updatedUser)}),deferred.promise},setCurrent:function(user){set(user)},logout:function(){api.call("user/logout").then(function(){delete $rootScope.currentUser,$location.path("/")})}};return $rootScope.signedIn=function(){return User.signedIn()},User}),app.factory("api",function($http,$q,$rootScope,$location,$bootbox,Utils){function showPhoneConfirmationDialog(){var user=$rootScope.currentUser;$bootbox.dialog({message:"You have not yet verified your phone number: "+user.Users_phone,buttons:{Cancel:{className:"btn-default"},"Text Confirmation Code":{className:"btn-primary",callback:function(){post("text_confirmation_code"),$bootbox.prompt("A Confirmation code has been sent. Please enter it below.",function(code){Utils.isEmpty(code)||post("confirm_confirmation_code",{code:code}).then(function(confirmed){confirmed&&$bootbox.alert("Your phone number has been confirmed.")})})}}}})}function call(url,options){var deferred=$q.defer(),obj={url:api_url+url,method:"GET",withCredentials:!0};return angular.extend(obj,options),"undefined"!==obj.data&&"GET"===obj.method&&(obj.params=obj.data,delete obj.data),$http(obj).success(function(response){response.meta.actions.forEach(function(){"logout"==response.action&&(delete $rootScope.currentUser,$location.url("")),"verifyPhone"==response.action&&showPhoneConfirmationDialog()});var messages={error:[],errorInternal:[],success:[],warning:[],alert:[]},errorOccurred=!1,showGenericError=!1;response.meta.messages.forEach(function(message){0===message.msg.indexOf("ERROR: ")&&(message.msg=message.msg.replace("ERROR: ","")),messages[message.type].push(message.msg),"error"==message.type?errorOccurred=!0:"errorInternal"==message.type&&(console.log("Internal Error: "+message.msg),errorOccurred=!0,(Utils.isEmpty(message,"hide")||message.hide!==!0)&&(showGenericError=!0))}),messages.error.length?$bootbox.dialog({message:messages.error.join("<br />")}):messages.errorInternal.length&&showGenericError&&($bootbox.hideAll(),$bootbox.dialog({message:"An error has occurred."})),errorOccurred?deferred.reject(messages.error):deferred.resolve(response.data)}).error(function(response){console.log(response.toString()),deferred.reject(response)}),deferred.promise}function get(url,data){return call(url,{data:data})}function post(url,data){return call(url,{method:"POST",data:data})}function put(url,data){return call(url,{method:"PUT",data:data})}var api_url="http://greekrush-128756.usw1-2.nitrousbox.com:4000/api/v1/";return{call:call,get:get,post:post,put:put}}),app.controller("MainCtrl",function($scope){$scope.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),app.controller("AboutCtrl",function($scope){$scope.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),app.controller("HeaderCtrl",function($scope,$location,User,$rootScope){function setSubNavTabs(){if(User.signedIn()){var currentUser=User.getCurrent();"chapter"==currentUser.Users_type?$scope.subNavTabs=[{title:"myCampus",link:"#/myCampus"}]:"council"==currentUser.Users_type&&($scope.subNavTabs=[{title:"Recruitments",link:"#/recruitments"}])}}$scope.isCollapsed=!0,$scope.$on("$routeChangeSuccess",function(){$scope.isCollapsed=!0}),$scope.$on("$routeChangeSuccess",function(){$scope.publicNavTabs.forEach(function(data){data.isActive=-1!=$location.path().indexOf(data.link)}),$scope.mainNavTabs.forEach(function(data){data.isActive=-1!=$location.path().indexOf(data.link)}),$scope.subNavTabs.forEach(function(data){data.isActive=-1!=$location.path().indexOf(data.link)})}),$scope.logout=function(){console.log("logout"),User.logout()},$scope.publicNavTabs=[{title:"About",link:"#/about"},{title:"Login",link:"#/login"},{title:"Join",link:"#/"}],$scope.mainNavTabs=[{title:"Home",link:"#/home"},{title:"Organizations",link:"#/organizations"},{title:"Universities",link:"#/universities"}],$scope.subNavTabs=[],$rootScope.$on("user.set",setSubNavTabs),setSubNavTabs()}),app.controller("AuthCtrl",function($scope,$location,User,$q,$rootScope,api,$bootbox){$scope.loginForm=!1,$scope.header="Sign Up!",$scope.toggle=function(){$scope.loginForm=!$scope.loginForm,$scope.header=$scope.loginForm?"Login":"Sign Up!"},$scope.login={},$scope.user={name:{first:"",last:""},email:"",password:""},$scope.login=function(){api.call("user/login",{method:"POST",data:{Users_email:$scope.login.email,Users_password:$scope.login.password}}).then(function(user){User.setCurrent(user),$location.path("complete"===user.Users_complete?"/home":"/complete-info")},function(){})},$scope.sendPasswordResetEmail=function(){api.call("forgot_password",{method:"POST",data:{Users_email:$scope.user.email}}).then(function(){$scope.error="",$scope.success="You have been sent an email with a link to reset your password."},function(errors){$scope.error=errors.join("<br />")})},$scope.register=function(){function showErrors(errors){$bootbox.dialog({message:errors.join("<br />")})}var new_user=angular.copy($scope.user);new_user.password=new_user.password.trim();var errors=[];""==new_user.name.first&&errors.push("Please enter your First Name."),""==new_user.name.last&&errors.push("Please enter your Last Name."),""==new_user.email&&errors.push("Please enter your Email Address."),new_user.password.length<5&&errors.push("Your Password must be at least 5 characters long."),errors.length?showErrors(errors):api.call("user/register",{method:"POST",data:{Users_firstname:new_user.name.first,Users_lastname:new_user.name.last,Users_email:new_user.email,Users_password:new_user.password,Users_tos:new_user.tos}}).then(function(user){User.setCurrent(user),$location.path("/complete-info")},function(){})},User.getUserFromDB().then(function(){$location.path("/complete-info")})}),app.controller("ProfileCtrl",function($scope,User,$location,$rootScope,$routeParams,Utils,api){console.log("Profile Controller"),$scope.profile=function(){api.get("user",{Users_id:$routeParams.userId}).then(function(profile){console.log(profile),$scope.profile=profile})}}),app.controller("UserSettingsCtrl",function($scope,User,$location,$rootScope,$anchorScroll,Utils,api){$scope.edit=!1,$scope.newPic=!1,$scope.userCopy=angular.copy($scope.currentUser),$scope.pickAndStore=function(){var picker_options={multiple:!1,folders:!1},store_options={location:"S3",path:"/profPics/",access:"public"};filepicker.pickAndStore(picker_options,store_options,function(InkBlob){$scope.blob=InkBlob,console.log("Inf URL:"+JSON.stringify(InkBlob[0])+" S3 Key:"+InkBlob[0].url),$scope.userCopy.Users_profpic=InkBlob[0].url,$scope.userCopy.Users_inkBlob=JSON.stringify(InkBlob[0]),$scope.newPic=!0},function(FPError){console.log(FPError)})},$scope.reset=function(){$scope.userCopy=angular.copy($scope.currentUser),$scope.edit=!1,$scope.newPic=!1},$scope.update=function(){$scope.loading=!0;var copy=angular.copy($scope.userCopy);console.log(copy),$scope.newPic===!0?api.post("user",{Users_firstname:copy.Users_firstname,Users_lastname:copy.Users_lastname,Users_email:copy.Users_email,Users_phone:copy.Users_phone,Users_home:copy.Users_home,Users_year:copy.Users_year,Users_profPic:copy.Users_profpic,Users_inkBlob:copy.Users_inkBlob}).then(function(updated){console.log(updated),User.setCurrent(updated),$scope.edit=!1,$scope.newPic=!1,$scope.loading=!1,$scope.success="Update complete!"}):$scope.newPic||api.post("user",{Users_firstname:copy.Users_firstname,Users_lastname:copy.Users_lastname,Users_email:copy.Users_email,Users_phone:copy.Users_phone,Users_home:copy.Users_home,Users_year:copy.Users_year}).then(function(updated){User.setCurrent(updated),$scope.userCopy=angular.copy($scope.currentUser),$scope.edit=!1,$scope.loading=!1,$scope.success="Update complete!"})}}),app.controller("ResetPassCtrl",function($scope,$routeParams,Utils,api){$scope.resetPassword=function(){var errors=[];$scope.password!==$scope.passwordRepeat&&errors.push("The passwords you entered do not match."),errors.length?($scope.error=errors.join("<br />"),$scope.success=""):api.call("reset_password",{method:"POST",data:{password:$scope.password,Users_id:$routeParams.Users_id,code:$routeParams.code}}).then(function(){$scope.error="",$scope.success="Your password has been updated."},function(errors){$scope.error=errors.join("<br />"),$scope.success=""})}}),app.controller("DashCtrl",function(){console.log("Dash Controller")}),app.controller("SignUpCtrl",function($scope,User,$location,$rootScope,$anchorScroll,Utils,api,Facebook,$bootbox){$scope.otherInfo={};var form=["info","pic","university","active","chapter","complete"];$scope.facebookStatus=function(){Facebook.getLoginStatus(function(response){console.log(response)})};var user=User.getCurrent();$scope.currentUser=user,Utils.isEmpty(user,"Users_complete")||"complete"!==user.Users_complete?Utils.isEmpty(user,"Users_complete")||"chapter"!==user.Users_complete?Utils.isEmpty(user,"Users_complete")||"active"!==user.Users_complete?Utils.isEmpty(user,"Users_complete")||"university"!==user.Users_complete?Utils.isEmpty(user,"Users_complete")||"pic"!==user.Users_complete?($scope.section=form[0],$scope.progress=0):($scope.section=form[1],$scope.progress=20):($scope.section=form[2],$scope.progress=40):($scope.section=form[3],$scope.progress=60):($scope.section=form[4],$scope.progress=80):($scope.section=form[5],$scope.progress=100,user.Users_eduVerified&&user.Users_phoneVerified&&$location.url("/home")),$scope.maxDate=new Date,$scope.date=new Date((new Date).setMonth((new Date).getYear()-324)),$scope.setUniversity=function(){User.updateUniversity({Universities_id:this.university.Universities_id}).then(function(updatedUser){$scope.section=updatedUser.Users_complete,$scope.progress=60})},$scope.setStatus=function(type){type?api.call("user",{method:"POST",data:{Users_complete:"chapter"}}).then(function(updatedUser){$scope.section=updatedUser.Users_complete,$scope.progress=100}):api.call("user",{method:"POST",data:{Users_complete:"complete"}}).then(function(updatedUser){console.log(updatedUser),$scope.section=updatedUser.Users_complete,$scope.progress=100})},$scope.notActive=function(){api.call("user",{method:"POST",data:{Users_complete:"active"}}).then(function(updatedUser){$scope.section=updatedUser.Users_complete,$scope.progress=60})},$scope.setChapter=function(){User.updateChapter({Chapters_id:this.chapter.Chapters_id}).then(function(updatedUser){$scope.section=updatedUser.Users_complete,$scope.progress=100})},$scope.connectFB=function(){Facebook.login(function(response){console.log(response),"connected"==response.status&&response.authResponse&&(Facebook.api("/me",function(fb_user){console.log(fb_user),api.post("user",{Users_facebookinfo:JSON.stringify({authResponse:response.authResponse,data:fb_user}),Users_gender:fb_user.gender,Users_dob:new Date(fb_user.birthday)}).then(function(user){User.setCurrent(user),$scope.otherInfo.gender=user.Users_gender,$scope.dt=user.Users_dob
})}),Facebook.api("/me/picture",{redirect:!1,type:"large"},function(picture){api.post("user",{Users_profpic:picture.data.url})}))},{scope:"public_profile, user_birthday, user_education_history"})},$scope.pickAndStore=function(){var picker_options={multiple:!1,folders:!1},store_options={location:"S3",path:"/profPics/",access:"public"};filepicker.pickAndStore(picker_options,store_options,function(InkBlob){$scope.blob=InkBlob,api.post("user",{Users_profpic:InkBlob[0].url,Users_inkBlob:JSON.stringify(InkBlob[0]),Users_complete:"university"}).then(function(updatedUser){User.setCurrent(updatedUser),"university"===updatedUser.Users_complete?($scope.section=updatedUser.Users_complete,$scope.progress=40):console.log("Returned User: "+updatedUser)})},function(FPError){console.log(FPError)})},$scope.next=function(){api.post("user",{Users_complete:"university"}).then(function(updatedUser){User.setCurrent(updatedUser),"university"===updatedUser.Users_complete?($scope.section=updatedUser.Users_complete,$scope.progress=40):console.log("Returned User: "+updatedUser)})},$scope.getUniversityNames=function(){api.call("universities").then(function(universities){$scope.universities=universities;var count=universities.length;console.log(universities.length),$scope.cols=3>=count?12/count:4})},$scope.chaptersOfUni=function(){api.get("chapters",{Orgs_gender:$scope.currentUser.Users_gender,Universities_id:$rootScope.currentUser.Universities_id}).then(function(chapters){$scope.chapters=chapters})},$scope.updateInfo=function(){function showErrors(errors){$bootbox.dialog({message:errors.join("<br />")})}var otherInfo=angular.copy($scope.otherInfo),errors=[];""===otherInfo.gender&&errors.push("Please specify your Gender."),""==otherInfo.phone&&errors.push("Please enter your Phone Number."),""==otherInfo.edu&&errors.push("Please enter your Phone Number."),errors.length?showErrors(errors):(console.log($scope.date),User.update({Users_phone:otherInfo.phone,Users_year:otherInfo.year,Users_home:otherInfo.home,Users_gender:otherInfo.gender,Users_edu:otherInfo.edu,Users_complete:"pic",Users_dob:new Date($scope.date).toISOString().slice(0,19).replace("T"," ")}).then(function(updatedUser){$scope.section=updatedUser.Users_complete,$scope.progress=20,$scope.emailCode(!1)}))},$scope.edit=!1,$scope.code={text:"",email:""},$scope.textCode=function(showMsg){1!==$scope.currentUser.Users_phoneVerified&&api.post("text_confirmation_code").then(function(something){console.log(something);var msg="Text Message Sent";showMsg&&$bootbox.dialog({message:msg})})},$scope.confirm=function(code){api.post("confirm_confirmation_code",{code:code}).then(function(what){console.log(what),what&&($scope.currentUser=User.getCurrent())})},$scope.emailCode=function(showMsg){api.post("email_confirmation_code").then(function(something){console.log(something);var msg="University Email Verification Sent";showMsg&&$bootbox.dialog({message:msg})})},$scope.editPhone=function(updated){var errors=[];""==updated?errors.push("Please enter your Phone Number."):User.update({Users_phone:updated,Users_phoneVerified:0}).then(function(updatedUser){User.setCurrent(updatedUser),$scope.currentUser=updatedUser,$scope.textCode(!0)})},$scope.editEdu=function(updated){var errors=[];""==updated?errors.push("Please enter your University Email."):User.update({Users_edu:updated,Users_eduVerified:0}).then(function(updatedUser){User.setCurrent(updatedUser),$scope.currentUser=updatedUser,$scope.emailCode(!0)})},$scope.edit=!1,$scope.maxDate=new Date,$scope.today=function(){$scope.dt=new Date},$scope.today(),$scope.clear=function(){$scope.dt=null},$scope.toggleMin=function(){$scope.minDate=$scope.minDate?null:new Date},$scope.toggleMin(),$scope.open=function($event){console.log($event),$event.preventDefault(),$event.stopPropagation(),$scope.opened=!0},$scope.dateOptions={singleDatePicker:!0,startingDay:1},$scope.initDate=new Date("2016-15-20"),$scope.formats=["dd-MMMM-yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"],$scope.format=$scope.formats[3]}),app.controller("CampusCtrl",function($scope,api,$routeParams,User,Utils,$location,$filter,$bootbox){var user=User.getCurrent();$scope.currentUser=user,$scope.status={one:!1,two:!1,three:!1},api.get("chapters",{Universities_id:user.Universities_id}).then(function(chapters){$scope.chapters=chapters}).then(function(){api.get("recruitments",{active:!0,Councils_gender:user.Users_gender,Universities_id:user.Universities_id}).then(function(recruitments){recruitments.length>0&&(console.log("Recruitments "+recruitments),$scope.selected=recruitments[0],$scope.selected.recs=JSON.parse(recruitments[0].Recruitments_requirements))})}),api.get("university",{Universities_id:user.Universities_id}).then(function(university){$scope.university=university}),$scope.joinRecruitment=function(recruitment){console.log(recruitment),api.post("join_recruitment",{Recruitments_id:recruitment.Recruitments_id}).then(function(){$scope.active="disabled",$scope.buttonMsg="You're Signed Up!"})},$scope.isOpen=function(start,end){var today=(new Date).getTime(),startDate=new Date(start).getTime(),endDate=new Date(end).getTime();return today>startDate&&endDate>today?($scope.buttonMsg="Sign Up For Recruitment",!0):($scope.active="disabled",$scope.buttonMsg="Sign Ups Open "+$filter("reformatdate")(start),!1)},$scope.showTerms=function(term){var msg="<b>"+term.key+" :</b><br/>"+term.value;$bootbox.dialog({message:msg})}}),app.controller("MyRecruitmentCtrl",function($scope,api,$routeParams,User){var user=User.getCurrent();$scope.currentUser=user,api.get("recruitments",{active:!0,Councils_gender:user.Users_gender,Universities_id:user.Universities_id}).then(function(recruitments){recruitments.length>0&&(console.log("Recruitments "+recruitments),$scope.selected=recruitments[0],$scope.selected.recs=JSON.parse(recruitments[0].Recruitments_requirements),api.get("recruitment",{Recruitments_id:$scope.selected.Recruitments_id,attachChapterRecruitments:!0}).then(function(info){console.log(info)}),api.get("chapters",{Universities_id:user.Universities_id,Orgs_gender:user.Users_gender,attachChapterRecruitments:!0,Recruitments_id:recruitments[0].Recruitments_id}).then(function(chapters){$scope.chapters=chapters,console.log(chapters)}))}),api.get("university",{Universities_id:user.Universities_id}).then(function(university){$scope.university=university})}),app.controller("UniversityDashCtrl",function($scope,User,$location,$rootScope,Utils,api){console.log("University Dash Controller");api.get("councils",{Universities_id:$scope.currentUser.Universities_id}).then(function(councils){$scope.councils=councils}).then(function(){api.get("users",{Universities_id:$scope.currentUser.Universities_id,Users_type:["chapter","council"]}).then(function(users){$scope.chapterUsers=users})}),$scope.getCouncilUsers=function(){$scope.councilUsers={},api.get("users",{Users_type:"council",Councils_id:$scope.unassign.councils_ids[0]}).then(function(users){$scope.councilUsers=users})},$scope.assignUser=function(council){council.users_ids.forEach(function(Users_id){api.post("university_user/set_user_type",{Users_id:Users_id,Users_type:"council",councils_ids:council.councils_ids}).then(function(){})})},$scope.unassignUser=function(council){council.users_ids.forEach(function(Users_id){api.post("university_user/remove_user_councils",{Users_id:Users_id,councils_ids:council.councils_ids}).then(function(){})})}}),app.controller("UniversityRecruitmentCtrl",function($scope,api,$routeParams,$filter,Utils,$q){$scope.reverse=!1,$scope.perPage=10,$scope.pageNum=1,$scope.predicate="",$scope.search="",$scope.numPages=1,$scope.list=[],$scope.boxes=[];var paginate=function(data,perPagestring,sortBy,search,reverse,pageNumstring){console.log("HERE IN PAGE");var deferred=$q.defer(),perPage=parseInt(perPagestring),pageNum=parseInt(pageNumstring),filtered=$filter("filter")(data,{$:search}),sorted=$filter("orderBy")(filtered,sortBy,reverse);console.log(sorted);var numPages=Math.ceil(sorted.length/perPage);$scope.totalNum=sorted.length,$scope.numPages=numPages;var start=perPage*(pageNum-1);if(pageNum*perPage>=sorted.length){var pageData=sorted.slice(start);console.log(pageData),deferred.resolve(pageData)}else{var end=perPage,pageData=sorted.slice(start,end);deferred.resolve(pageData)}return deferred.promise},getTableData=function(type){api.get("recruitment_users",{Recruitments_id:$routeParams.Recruitments_id,RecruitmentUsers_status:type}).then(function(users){console.log(users),$scope.users=users,paginate(users,$scope.perPage,$scope.predicate,$scope.search,$scope.reverse,$scope.pageNum).then(function(pageData){$scope.pageData=pageData})})};$scope.getTableData=function(type){getTableData(type)},api.get("recruitment",{Recruitments_id:$routeParams.Recruitments_id}).then(function(recruitment){console.log(recruitment),$scope.recruitment=recruitment}).then(function(){console.log("HERE!!!!"),getTableData("pending")}),$scope.verify=function(userId){var ids=[];ids.push(userId),console.log(ids),api.post("university_user/update_recruitment_users_statuses",{recruitmentusers_ids:ids,RecruitmentUsers_status:"approved"}).then(function(some){console.log(some),getTableData()})},$scope.reject=function(userId){var ids=[];ids.push(userId),console.log(ids),api.post("university_user/update_recruitment_users_statuses",{recruitmentusers_ids:ids,RecruitmentUsers_status:"rejected"}).then(function(some){console.log(some),getTableData()})},$scope.updateList=function(action,user){if($scope.mailto="","add"===action){$scope.list.push(user);for(var i in $scope.list){var user=$scope.list[i];$scope.mailto=""===$scope.mailto?user:$scope.mailto+","+user}}else if("remove"===action){$scope.box="remove";var here=$scope.list.indexOf(user);$scope.list.splice(here,1);for(var i in $scope.list){var user=$scope.list[i];$scope.mailto=""===$scope.mailto?user:$scope.mailto+","+user}}console.log($scope.list)},$scope.updateListAll=function(action,users){if($scope.list=[],$scope.mailto="","add"===action)for(var i in users){var user=users[i].Users_email;$scope.list.push(user),$scope.boxes[i]="add",$scope.mailto=""===$scope.mailto?user:$scope.mailto+","+user}else $scope.boxes=[];console.log($scope.mailto)},$scope.emailSelected=function(){},$scope.$watchCollection("[perPage, predicate, search.$, reverse, pageNum, users]",function(newVals,oldVals){if(console.log("new: "+newVals),console.log("old: "+oldVals),Utils.isEmpty(oldVals)){if(Utils.isEmpty(oldVals)&&!Utils.isEmpty(newVals[4])){if(""===newVals[0])return!1;paginate(newVals[5],newVals[0],newVals[1],newVals[2],newVals[3],newVals[4]).then(function(pageData){$scope.pageData=pageData})}}else{if(""===newVals[0])return!1;console.log("before pagedata"),paginate(newVals[5],newVals[0],newVals[1],newVals[2],newVals[3],newVals[4]).then(function(pageData){console.log(pageData),$scope.pageData=pageData})}})}),app.controller("ChapterCtrl",function($scope,$location,$rootScope,$q,$routeParams,api){var updateFollowers=function(){api.get("chapter_followers",{Chapters_id:$scope.chapter.Chapters_id}).then(function(followers){$scope.followers=followers,$scope.tiles[1]={text:"Followers",href:"",titleBarInfo:followers.length,color:"danger",classes:"fa fa-thumbs-up"}})},isFollowing=function(){$scope.following=[],api.get("user_following",{Users_id:$scope.currentUser.Users_id}).then(function(chapters){console.log($scope.following);for(var i in chapters)$scope.following[chapters[i].Chapters_id]=!0,console.log($scope.following);updateFollowers()})};api.call("chapter",{data:{Chapters_name:$routeParams.chapterName,Orgs_name:$routeParams.orgName}}).then(function(chapter){return $scope.chapter=chapter,isFollowing(),chapter}).then(function(chapter){api.get("events",{Orgs_id:chapter.Orgs_id,Events_type:"org"}).then(function(events){$scope.events=events}).then(function(){api.get("users",{Users_type:"chapter",Chapters_id:chapter.Chapters_id,active:!0}).then(function(actives){return console.log(actives),$scope.actives=actives,actives}).then(function(){api.get("chapter_followers",{Chapters_id:chapter.Chapters_id}).then(function(followers){$scope.followers=followers,$scope.tiles=[{text:"Actives",href:"",titleBarInfo:"87",color:"inverse",classes:"fa fa-users"},{text:"Followers",href:"",titleBarInfo:followers.length,color:"danger",classes:"fa fa-thumbs-up"},{text:"Rushing",href:"",titleBarInfo:"37",color:"primary",classes:"fa fa-eye"},{text:"Events",href:"",titleBarInfo:"9",color:"orange",classes:"fa fa-university"}]})})})}),$scope.follow=function(){api.post("follow_chapter",{Chapters_id:$scope.chapter.Chapters_id}).then(function(){isFollowing()})},$scope.unfollow=function(){api.post("unfollow_chapter",{Chapters_id:$scope.chapter.Chapters_id}).then(function(){isFollowing()})}}).controller("ChapterRequestsCtrl",function($scope,api,$sce,User){api.get("chapter_requests").then(function(chapterRequests){$scope.chapterRequests=chapterRequests}),$scope.approve=function(id){var ids=[];ids.push(id),api.post("update_chapter_requests",{chapterrequests_ids:ids,ChapterRequests_status:"approved"}).then(function(){api.get("chapter_requests").then(function(chapterRequests){$scope.chapterRequests=chapterRequests,User.getUserFromDB()})})},$scope.deny=function(id){var ids=[];ids.push(id),api.post("update_chapter_requests",{chapterrequests_ids:ids,ChapterRequests_status:"rejected"}).then(function(){api.get("chapter_requests").then(function(chapterRequests){$scope.chapterRequests=chapterRequests})})}}).controller("ChapterAdminCtrl",function($scope,api){api.get("users",{Users_type:"chapter",Chapters_id:$scope.currentUser.Chapters_id,active:!0}).then(function(actives){return console.log(actives),$scope.actives=actives,actives}),api.get("recruitments",{active:!0,Universities_id:$scope.currentUser.Universities_id,Councils_gender:$scope.currentUser.Users_gender,Chapters_id:$scope.currentUser.Chapters_id,attachChapterRecruitments:!0}).then(function(recruitment){return $scope.recruitment=recruitment[0],console.log(recruitment[0]),recruitment[0]}).then(function(recruitment){api.get("get_recruitment_chairs",{ChapterRecruitments_id:recruitment.ChapterRecruitments_id}).then(function(chairs){$scope.chairs=chairs;var actives=$scope.actives;for(var i in actives)for(var x in chairs)actives[i].Users_id===chairs[x].Users_id&&(console.log("MATCH "+actives[i].Users_id+" "+chairs[x].Users_id),$scope.actives.splice(i,1))})}),$scope.assignChair=function(assign){console.log(assign),api.post("assign_recruitment_chairs",{ChapterRecruitments_id:$scope.recruitment.ChapterRecruitments_id,chapterusers_ids:assign}).then(function(resp){console.log(resp),api.get("get_recruitment_chairs",{ChapterRecruitments_id:$scope.recruitment.ChapterRecruitments_id}).then(function(chairs){$scope.chairs=chairs;var actives=$scope.actives;for(var i in actives)for(var x in chairs)actives[i].Users_id===chairs[x].Users_id&&(console.log("MATCH "+actives[i].Users_id+" "+chairs[x].Users_id),$scope.actives.splice(i,1))})})},$scope.unassignChair=function(unassign){console.log(unassign),api.post("unassign_recruitment_chairs",{ChapterRecruitments_id:$scope.recruitment.ChapterRecruitments_id,chapterusers_ids:unassign}).then(function(resp){console.log(resp),api.get("get_recruitment_chairs",{ChapterRecruitments_id:$scope.recruitment.ChapterRecruitments_id}).then(function(chairs){$scope.chairs=chairs;var actives=$scope.actives;for(var i in actives)for(var x in chairs)actives[i].Users_id===chairs[x].Users_id&&(console.log("MATCH "+actives[i].Users_id+" "+chairs[x].Users_id),$scope.actives.splice(i,1))})})}}),app.controller("OrgsCtrl",function($scope,api,$routeParams){$scope.following=[],api.get("orgs").then(function(orgs){$scope.orgs=orgs}),$scope.getOrg=function(){console.log($routeParams.orgId),api.get("org",{Orgs_id:$routeParams.orgId}).then(function(org){$scope.org=org})},$scope.getOrgChapters=function(){api.get("chapters",{Orgs_id:$routeParams.orgId}).then(function(chapters){$scope.chapters=chapters;for(var i in chapters)$scope.isFollowing(chapters[i].Chapters_id)})},$scope.followChapter=function(chapter_id){api.post("follow_chapter",{Chapters_id:chapter_id}).then(function(){$scope.isFollowing(chapter_id)})},$scope.isFollowing=function(chapter_id){api.get("chapter_followers",{Chapters_id:chapter_id}).then(function(chapter){$scope.following[chapter_id]=!1;for(var i in chapter)$scope.following[chapter[i].Chapters_id]=!0})},$scope.unfollowChapter=function(chapter_id){console.log(chapter_id),api.post("delete_following",{Chapters_id:chapter_id}).then(function(){$scope.isFollowing(chapter_id)})}}).controller("OrgCtrl",function($scope,api,$routeParams){$scope.following=[],$scope.getOrgs=function(){api.get("orgs").then(function(orgs){$scope.orgs=orgs})},api.get("org",{Orgs_id:$routeParams.orgId}).then(function(org){console.log(org),$scope.org=org}),api.get("chapters",{Orgs_id:$routeParams.orgId}).then(function(chapters){$scope.chapters=chapters;for(var i in chapters)$scope.isFollowing(chapters[i].Chapters_id)}),$scope.followChapter=function(chapter_id){api.post("follow_chapter",{Chapters_id:chapter_id}).then(function(){$scope.isFollowing(chapter_id)})},$scope.isFollowing=function(chapter_id){api.get("chapter_followers",{Chapters_id:chapter_id}).then(function(chapter){$scope.following[chapter_id]=!1;for(var i in chapter)$scope.following[chapter[i].Chapters_id]=!0})},$scope.unfollowChapter=function(chapter_id){console.log(chapter_id),api.post("delete_following",{Chapters_id:chapter_id}).then(function(){$scope.isFollowing(chapter_id)})}}),app.controller("UniversitiesCtrl",function($scope,api,$routeParams){api.get("universities").then(function(universities){$scope.universities=universities})}).controller("UniversityCtrl",function($scope,api,$routeParams){$scope.status={one:!0,two:!0};var getUniversityChapters=function(){api.get("chapters",{Universities_id:$routeParams.universityId}).then(function(chapters){console.log(chapters),$scope.chapters=chapters})};getUniversityChapters(),api.get("university",{Universities_id:$routeParams.universityId}).then(function(university){console.log(university),$scope.university=university}).then(function(){api.get("users",{Universities_id:$scope.university.Universities_id}).then(function(users){console.log(users),$scope.numUsers=users.length})})}),app.controller("RecruitmentsCtrl",function($scope,api,User,$bootbox,Utils){$scope.newRecruitment={},$scope.edit=!1,$scope.councils=[];var councils_ids=User.getCurrent().councils_ids;1==councils_ids.length?$scope.newRecruitment.Recruitments_joinCouncils_id=councils_ids[0]:api.get("councils").then(function(councils){$scope.councils=councils}),$scope.status={isFirstOpen:!0},$scope.createRecruitment=function(){$scope.newRecruitment.Recruitments_requirements={requirements:$scope.requirements,otherInfo:$scope.otherInfo,otherTerms:$scope.otherTerms},api.post("recruitment/create",$scope.newRecruitment).then(function(){$scope.success="New Recruitment created!",$scope.err="",$scope.newRecruitment={},$scope.getRecruitments()},function(errors){$scope.err=errors.join("<br />")})},$scope.parseRecs=function(selected){$scope.selected=selected,Utils.isEmpty(selected.Recruitments_requirements)||(console.log(selected.Recruitments_requirements),$scope.selected.recs=JSON.parse(selected.Recruitments_requirements))},$scope.removeRec=function(rec,selected){selected.splice(rec,1)},$scope.open=function($event){$event.preventDefault(),$event.stopPropagation(),$scope.opened=!0},$scope.getRecruitments=function(){api.get("council_user/recruitments").then(function(recruitments){$scope.recruitments=recruitments})},api.get("council_user/recruitments",{attachChapterRecruitments:!0}).then(function(recruitments){$scope.recruitments=recruitments,console.log(recruitments)}),$scope.recs=[],$scope.requirements=[],$scope.infos=[],$scope.otherInfo=[],$scope.terms=[],$scope.otherTerms=[],$scope.addNew=function(collection){var rec={key:"",value:""};collection.push(rec)},$scope.moveTo=function(thing,from,to){to.push(thing),from.splice(thing)},$scope.assignChapter=function(chapter,recruitment){api.post("/recruitment/assign_chapter",{Recruitments_id:recruitment.Recruitments_id,Chapters_id:chapter.Chapters_id}).then(function(yay){console.log(yay)})},$scope.chapterList=[],$scope.checkChapter=function(chapter){chapter.isChecked===!0&&(console.log("Check"),$scope.chapterList.push(chapter)),chapter.isChecked===!1&&console.log("UnCheck")};var user=angular.copy($scope.currentUser);api.get("chapters",{Universities_id:user.Universities_id,Orgs_gender:user.Users_gender}).then(function(chapters){$scope.chapters=chapters})}).controller("RecruitmentCtrl",function($scope,api,$routeParams,$filter,Utils,$q){$scope.reverse=!1,$scope.perPage=10,$scope.pageNum=1,$scope.predicate="",$scope.search="",$scope.numPages=1;var paginate=function(data,perPagestring,sortBy,search,reverse,pageNumstring){var deferred=$q.defer(),perPage=parseInt(perPagestring),pageNum=parseInt(pageNumstring),filtered=$filter("filter")(data,{$:search}),sorted=$filter("orderBy")(filtered,sortBy,reverse),numPages=Math.ceil(sorted.length/perPage);$scope.totalNum=sorted.length,$scope.numPages=numPages;var start=perPage*(pageNum-1);if(pageNum*perPage>=sorted.length){var pageData=sorted.slice(start);deferred.resolve(pageData)}else{var end=perPage,pageData=sorted.slice(start,end);deferred.resolve(pageData)}return deferred.promise};api.get("recruitment",{Recruitments_id:$routeParams.Recruitments_id}).then(function(recruitment){$scope.recruitment=recruitment}).then(function(){api.get("recruitment_users",{Recruitments_id:$routeParams.Recruitments_id,RecruitmentUsers_status:"pending"}).then(function(users){Math.ceil(users.length/$scope.perPage);$scope.users=users,paginate(users,$scope.perPage,$scope.predicate,$scope.search,$scope.reverse,$scope.pageNum).then(function(pageData){$scope.pageData=pageData})})}),$scope.$watchCollection("[perPage, predicate, search.$, reverse, pageNum, users]",function(newVals,oldVals){if(Utils.isEmpty(oldVals)){if(Utils.isEmpty(oldVals)&&!Utils.isEmpty(newVals[4])){if(""===newVals[0])return!1;paginate(newVals[5],newVals[0],newVals[1],newVals[2],newVals[3],newVals[4]).then(function(pageData){$scope.pageData=pageData})}}else{if(""===newVals[0])return!1;paginate(newVals[5],newVals[0],newVals[1],newVals[2],newVals[3],newVals[4]).then(function(pageData){$scope.pageData=pageData})}})}),app.controller("RecruitmentSignUpCtrl",function($scope,api,$routeParams){api.get("recruitment",{Recruitments_id:$routeParams.Recruitments_id}).then(function(recruitment){$scope.recruitment=recruitment}),$scope.signUp=function(){api.post("join_recruitment",{Recruitments_id:$routeParams.Recruitments_id}).then(function(updatedUser){console.log(updatedUser)})}}),app.controller("EventsCtrl",function(){}),angular.module("Utils",[]).factory("Utils",function(){function isEmpty(obj){function _isEmpty(_obj){return"undefined"==typeof _obj||!_obj||"object"==typeof _obj&&!Object.keys(_obj).length}if(_isEmpty(obj))return!0;for(var args=Array.prototype.slice.call(arguments),obj=args.shift(),i=0;i<args.length;i++){if(_isEmpty(obj)||"undefined"==typeof obj[args[i]]||!obj[args[i]])return!0;obj=obj[args[i]]}return!1}return{isEmpty:isEmpty}});